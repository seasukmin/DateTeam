"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[73185],{95631:function(e,t,r){r.d(t,{E:function(){return c},W:function(){return useLikedFolderDrawer}});var n=r(91987),l=r(15464),o=r(46933),a=r(60228),i=r(38638);let c=(0,l.cn)({key:"likedFolderDrawerAtom",default:{open:!1,folders:[],fullPageMode:!1,resolve:()=>{},reject:()=>{}}}),useLikedFolderDrawer=()=>{let{cookie:e}=(0,a.S)(),t=(0,l.Zl)(c),{refetch:r,fetchNextPage:d,isFetching:s}=(0,i.b)({enabled:!1,notifyOnChangeProps:[]}),u=(0,n.useCallback)(()=>{t(e=>({...e,open:!1}))},[t]),{removeCustomHistory:f,addCustomHistory:p}=(0,o.K)(u),w=(0,n.useCallback)(async n=>{var l;let{data:o}=await r(),a=null!==(l=null==o?void 0:o.pages.flatMap(e=>e.folders))&&void 0!==l?l:[],i=1===a.length;return i||e.isDefaultFolderOnly()?new Promise(e=>e({folderSno:0,folderTitle:"기본 서랍"})):(p(),new Promise((e,r)=>{t(t=>({...t,sno:n,open:!0,resolve:e,reject:r,folders:a}))}))},[p,e,r,t]),b=(0,n.useCallback)(async e=>{var r;if(!e.isIntersecting||s)return;let{data:n}=await d(),l=null!==(r=null==n?void 0:n.pages.flatMap(e=>e.folders))&&void 0!==r?r:[];t(e=>({...e,folders:l}))},[d,s,t]);return{closeLikedFolderDrawer:u,cleanLikedFolderDrawer:()=>{u(),f()},openLikedFolderDrawer:w,setFullpage:()=>t(e=>({...e,fullPageMode:!0})),unsetFullpage:()=>t(e=>({...e,fullPageMode:!1})),loadMoreFolders:b}}},5217:function(e,t,r){r.d(t,{$Y:function(){return i},RE:function(){return o},SG:function(){return a}});var n=r(80808),l=r(88309);function _tagged_template_literal(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function _templateObject(){let e=_tagged_template_literal(["\n  height: 72px;\n  border-bottom: 1px solid ",";\n  display: flex;\n  align-items: center;\n  padding-left: 16px;\n"]);return _templateObject=function(){return e},e}function _templateObject1(){let e=_tagged_template_literal(["\n  width: 44px;\n  height: 44px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background: ",";\n  border-radius: 6px;\n  margin-right: 12px;\n  overflow: hidden;\n"]);return _templateObject1=function(){return e},e}function _templateObject2(){let e=_tagged_template_literal(["\n  overflow: hidden;\n  flex: 1;\n  user-select: none;\n"]);return _templateObject2=function(){return e},e}let o=n.default.div.withConfig({componentId:"sc-2f83740d-0"})(_templateObject(),l.$.gray10),a=n.default.div.withConfig({componentId:"sc-2f83740d-1"})(_templateObject1(),l.$.gray10),i=n.default.div.withConfig({componentId:"sc-2f83740d-2"})(_templateObject2())},73185:function(e,t,r){r.d(t,{I:function(){return LikedFolderDrawer}});var n=r(61261),l=r(91987),o=r(80808),a=r(15464),i=r(28880),c=r(85926),d=r(74572),s=r(32473),u=r(7187),f=r(24362),p=r(38638),w=r(28848),b=r(81762),m=r(93489),g=r(95631),j=r(5217);function _templateObject(){var e,t;let r=(e=["\n  width: 100%;\n  height: 100%;\n  padding: 11px;\n"],t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}})));return _templateObject=function(){return r},r}let h=o.default.img.withConfig({componentId:"sc-5f278382-0"})(_templateObject()),Folder=e=>{let{count:t,goodsImages:r,webviewGoodsImages:l,folderSno:o,title:c,coverImage:d,index:s}=e,{resolve:u}=(0,a.sJ)(g.E),{cleanLikedFolderDrawer:f}=(0,g.W)();return(0,n.jsxs)(j.RE,{onClick:()=>{u({folderSno:o,folderTitle:c}),f()},"data-test-id":"웹뷰서랍리스트&LIST_ID=".concat(s),children:[(0,n.jsx)(j.SG,{children:r.length>0?(0,n.jsx)(m.o,{src:d||r[0],freezeSrc:d||l[0],alt:c,freeze:!0}):(0,n.jsx)(h,{src:"/icon/icon_card_zzim.svg"})}),(0,n.jsx)(i.R,{color:"black",type:"subtitle2",children:c}),(0,n.jsxs)(i.R,{color:"gray50",type:"body2",style:{marginLeft:"4px"},children:["(",t,")"]})]})};var v=r(91979),_=r(4641),x=r(2982),O=r(15531),F=r(46933);let k=(0,a.cn)({key:"newFolderDrawerAtom",default:{open:!1}}),useNewFolderDrawer=()=>{let e=(0,a.Zl)(k),{removeCustomHistory:t,addCustomHistory:r}=(0,F.K)(()=>e(e=>({...e,open:!1}))),closeNewFolderDrawer=()=>{e(e=>({...e,open:!1}))};return{openNewFolderDrawer:()=>{e(e=>({...e,open:!0})),r()},closeNewFolderDrawer,cleanNewFolderDrawer:()=>{closeNewFolderDrawer(),t()}}};function NewFolderButton_templateObject(){var e,t;let r=(e=["\n            width: 22px;\n            height: 22px;\n          "],t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}})));return NewFolderButton_templateObject=function(){return r},r}let NewFolderButton=()=>{let{openNewFolderDrawer:e}=useNewFolderDrawer(),{eventLogger:t}=(0,x.wL)();return(0,n.jsxs)(j.RE,{onClick:()=>{t.log({channel:[O.n.Firebase,O.n.Appsflyer,O.n.Facebook],eventName:_.F.CLICK_MAKE_NEW_FOLDER,analytics:{}}),e()},children:[(0,n.jsx)(j.SG,{children:(0,n.jsx)(y,{})}),(0,n.jsx)(i.R,{color:"black",type:"subtitle2",children:"새 서랍 만들기"})]})};var y=(0,o.default)(v.Z).withConfig({componentId:"sc-d9b3b4a2-0"})(NewFolderButton_templateObject()),D=r(80833),N=r(11631),C=r(27945),L=r(46713),z=r(88309);function NewFolderDrawer_styles_templateObject(){var e,t;let r=(e=["\n  flex: 1;\n  border: none;\n  outline: none;\n  padding: 20px;\n  font-size: 16px;\n  letter-spacing: -0.4px;\n  color: ",";\n  ::placeholder {\n    font-weight: 600;\n    font-size: 14px;\n    letter-spacing: -0.4px;\n    color: ",";\n  }\n"],t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}})));return NewFolderDrawer_styles_templateObject=function(){return r},r}let E=o.default.textarea.withConfig({componentId:"sc-c7998dc3-0"})(NewFolderDrawer_styles_templateObject(),z.$.black,z.$.gray40);function NewFolderDrawer_templateObject(){var e,t;let r=(e=["\n          border-radius: 0px;\n        "],t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}})));return NewFolderDrawer_templateObject=function(){return r},r}let NewFolderDrawer=()=>{let[e,t]=(0,l.useState)(""),r=(0,l.useRef)(null),o=(0,a.sJ)(k),{cleanNewFolderDrawer:d,closeNewFolderDrawer:s}=useNewFolderDrawer(),{resolve:u}=(0,a.sJ)(g.E),{setFullpage:f,unsetFullpage:p,closeLikedFolderDrawer:w}=(0,g.W)();(0,l.useEffect)(()=>{o.open&&r&&(0,L.v)(r)},[o.open]);let postNewFolderAndResolve=async()=>{let{sno:r,title:n}=await C.x.createOne(e);u({folderSno:r,folderTitle:n}),closeAllDrawer(),t("")},closeAllDrawer=()=>{s(),w(),history.go(-2)};return(0,n.jsxs)(c.v,{open:o.open,onClose:()=>d(),Title:(0,n.jsx)(i.R,{color:"gray60",type:"subtitle1",children:"새 서랍 만들기"}),borderRadius:"10px",height:"290px",zIndex:D.KN.innerDrawer,style:{top:"unset"},children:[(0,n.jsx)(E,{value:e,onChange:e=>t(e.target.value),placeholder:"서랍 이름은 최소 한 글자 이상 입력해야합니다",onFocus:()=>f(),onBlur:()=>p(),ref:r}),(0,n.jsx)(P,{onClick:postNewFolderAndResolve,color:"pink",size:"xlarge",disabled:!e.length,children:"완료"})]})};var P=(0,o.default)(N.w).withConfig({componentId:"sc-f216053f-0"})(NewFolderDrawer_templateObject()),I=r(68646),R=r(46631);function LikedFolderDrawer_templateObject(){var e,t;let r=(e=["\n        position: relative;\n        bottom: 100px;\n      "],t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}})));return LikedFolderDrawer_templateObject=function(){return r},r}let LikedFolderObserver=()=>{let{loadMoreFolders:e}=(0,g.W)(),{hasNextPage:t}=(0,p.b)({enabled:!1});return t?(0,n.jsx)(S,{callback:e}):null},LikedFolderDrawerInner=()=>{let e=(0,a.sJ)(g.E),{cleanLikedFolderDrawer:t}=(0,g.W)(),fireFinalAnimation=e=>{e>50&&t()},{viewPortRef:r,isScrollTopRef:o,scrollBoxRef:s}=(0,u.v)({resetDeps:[e.open]}),{swipeRef:p,targetRef:m}=(0,f.Y)({onTouchEnd:fireFinalAnimation,condition:e=>e>0&&o.current}),{swipeRef:j}=(0,f.Y)({onTouchEnd:fireFinalAnimation,condition:e=>e>0}),h=(0,w.l)([s,p]),v=(0,w.l)([j,m]),{folders:_}=e;return(0,n.jsxs)(c.v,{open:e.open,Title:(0,n.jsx)(i.R,{color:"gray60",type:"subtitle1",children:"찜할 서랍 선택"}),borderRadius:e.fullPageMode?"0px":"10px",height:e.fullPageMode?"100%":"70vh",onClose:()=>t(),ref:v,children:[(0,n.jsx)(NewFolderButton,{}),b.rt.isMobile?(0,n.jsxs)(R.X,{viewPortRef:r,scrollboxRef:h,children:[_.map((e,t)=>(0,l.createElement)(Folder,{...e,key:e.folderSno,index:t})),(0,n.jsx)(LikedFolderObserver,{})]}):(0,n.jsx)(I.A,{children:(0,n.jsxs)("div",{children:[_.map((e,t)=>(0,l.createElement)(Folder,{...e,key:e.folderSno,index:t})),(0,n.jsx)(LikedFolderObserver,{})]})}),(0,n.jsx)(d.h,{children:(0,n.jsx)(NewFolderDrawer,{})})]})},LikedFolderDrawer=()=>(0,n.jsx)(d.h,{children:(0,n.jsx)(LikedFolderDrawerInner,{})});var S=(0,o.default)(s.Q).withConfig({componentId:"sc-1506aa0a-0"})(LikedFolderDrawer_templateObject())},68646:function(e,t,r){r.d(t,{A:function(){return ScrollableList}});var n=r(61261),l=r(80808),o=r(5217);function _tagged_template_literal(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function _templateObject(){let e=_tagged_template_literal(["\n    overflow: scroll;\n  "]);return _templateObject=function(){return e},e}function _templateObject1(){let e=_tagged_template_literal([void 0,void 0]);return _templateObject1=function(){return e},e}let ScrollableList=e=>{let{children:t,wrapperCSS:r}=e,o=(0,l.css)(_templateObject()),i=r?o.concat(r):o;return(0,n.jsx)(a,{$_css:i,children:t})};var a=(0,l.default)(o.$Y).withConfig({componentId:"sc-e9355475-0"})(_templateObject1(),e=>e.$_css)},46631:function(e,t,r){r.d(t,{X:function(){return SwipableList}});var n=r(61261),l=r(5217);let SwipableList=e=>{let{children:t,viewPortRef:r,scrollboxRef:o,className:a}=e;return(0,n.jsx)(l.$Y,{ref:r,children:(0,n.jsx)("div",{className:a,ref:o,children:t})})}},38638:function(e,t,r){r.d(t,{b:function(){return useLikedFolders}});var n=r(28697),l=r(27945),o=r(71217);let getLikeFolders=async e=>{let{pageParam:t}=e;return l.x.readOne(t)},useLikedFolders=e=>(0,n.N)({queryKey:o.E.likedFolders(),queryFn:getLikeFolders,getNextPageParam:e=>0===e.folders.length?void 0:e.folders[e.folders.length-1].folderSno,...e})},27945:function(e,t,r){r.d(t,{x:function(){return l}});var n=r(56136);let l=new class{async readOne(e){let{data:t}=await this.httpClient.request({method:"GET",url:"/api/v2/members/me/liked_folders/",params:{...e&&{last_sno:e}}});return{folders:t.folders.map(e=>{let{count:t,goods_images:r,webview_goods_images:n,sno:l,title:o,cover_image:a}=e;return{count:t,coverImage:null!=a?a:"",goodsImages:r,webviewGoodsImages:n,folderSno:l,title:o}})}}async createOne(e){let{data:t}=await this.httpClient.request({method:"POST",url:"/api/v2/members/me/liked_folders/",data:{title:e}});return t}constructor(e){this.httpClient=e}}(n.KP)},46713:function(e,t,r){r.d(t,{v:function(){return focusTextArea}});let focusTextArea=e=>{var t;let r=document.createElement("input");r.setAttribute("type","text"),null===(t=e.current)||void 0===t||t.prepend(r),r.focus(),setTimeout(()=>{var t;null===(t=e.current)||void 0===t||t.focus(),r.remove()},150)}},91979:function(e,t,r){var n,l=r(91987);function _extends(){return(_extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}t.Z=function(e){return l.createElement("svg",_extends({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 22 22"},e),n||(n=l.createElement("g",{fill:"none",fillRule:"evenodd"},l.createElement("path",{d:"M0 0h22v22H0z"}),l.createElement("path",{fill:"#2572F7",className:"icon_add_svg__painted",d:"M16.5 11.917h-4.583V16.5c0 .504-.413.917-.917.917s-.917-.413-.917-.917v-4.583H5.5c-.504 0-.917-.413-.917-.917s.413-.917.917-.917h4.583V5.5c0-.504.413-.917.917-.917s.917.413.917.917v4.583H16.5c.504 0 .917.413.917.917s-.413.917-.917.917z"}))))}}}]);