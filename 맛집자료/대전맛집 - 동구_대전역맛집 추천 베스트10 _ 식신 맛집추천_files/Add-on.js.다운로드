Tmap.Control.GetFeature=Tmap.Class(Tmap.Control,{protocol:null,multipleKey:null,toggleKey:null,modifiers:null,multiple:!1,click:!0,single:!0,clickout:!0,toggle:!1,clickTolerance:5,hover:!1,box:!1,maxFeatures:10,features:null,hoverFeature:null,handlers:null,hoverResponse:null,filterType:Tmap.Filter.Spatial.BBOX,initialize:function(a){a.handlerOptions=a.handlerOptions||{},Tmap.Control.prototype.initialize.apply(this,[a]),this.features={},this.handlers={},this.click&&(this.handlers.click=new Tmap.Handler.Click(this,{click:this.selectClick},this.handlerOptions.click||{})),this.box&&(this.handlers.box=new Tmap.Handler.Box(this,{done:this.selectBox},Tmap.Util.extend(this.handlerOptions.box,{boxDivClassName:"tmHandlerBoxSelectFeature"}))),this.hover&&(this.handlers.hover=new Tmap.Handler.Hover(this,{move:this.cancelHover,pause:this.selectHover},Tmap.Util.extend(this.handlerOptions.hover,{delay:250,pixelTolerance:2})))},activate:function(){if(!this.active)for(var a in this.handlers)this.handlers[a].activate();return Tmap.Control.prototype.activate.apply(this,arguments)},deactivate:function(){if(this.active)for(var a in this.handlers)this.handlers[a].deactivate();return Tmap.Control.prototype.deactivate.apply(this,arguments)},selectClick:function(a){var b=this.pixelToBounds(a.xy);this.setModifiers(a),this.request(b,{single:this.single})},selectBox:function(a){var b;if(a instanceof Tmap.Bounds){var c=this.map.getLonLatFromPixel({x:a.left,y:a.bottom}),d=this.map.getLonLatFromPixel({x:a.right,y:a.top});b=new Tmap.Bounds(c.lon,c.lat,d.lon,d.lat)}else{if(this.click)return;b=this.pixelToBounds(a)}this.setModifiers(this.handlers.box.dragHandler.evt),this.request(b)},selectHover:function(a){var b=this.pixelToBounds(a.xy);this.request(b,{single:!0,hover:!0})},cancelHover:function(){this.hoverResponse&&(this.protocol.abort(this.hoverResponse),this.hoverResponse=null,Tmap.Element.removeClass(this.map.viewPortDiv,"tmCursorWait"))},request:function(a,b){b=b||{};var c=new Tmap.Filter.Spatial({type:this.filterType,value:a});Tmap.Element.addClass(this.map.viewPortDiv,"tmCursorWait");var d=this.protocol.read({maxFeatures:1==b.single?this.maxFeatures:void 0,filter:c,callback:function(c){c.success()&&(c.features.length?1==b.single?this.selectBestFeature(c.features,a.getCenterLonLat(),b):this.select(c.features):b.hover?this.hoverSelect():(this.events.triggerEvent("clickout"),this.clickout&&this.unselectAll())),Tmap.Element.removeClass(this.map.viewPortDiv,"tmCursorWait")},scope:this});1==b.hover&&(this.hoverResponse=d)},selectBestFeature:function(a,b,c){if(c=c||{},a.length){for(var d,e,f,g=new Tmap.Geometry.Point(b.lon,b.lat),h=Number.MAX_VALUE,i=0;i<a.length&&(d=a[i],!(d.geometry&&(f=g.distanceTo(d.geometry,{edge:!1}),h>f&&(h=f,e=d,0==h))));++i);1==c.hover?this.hoverSelect(e):this.select(e||a)}},setModifiers:function(a){this.modifiers={multiple:this.multiple||this.multipleKey&&a[this.multipleKey],toggle:this.toggle||this.toggleKey&&a[this.toggleKey]}},select:function(a){this.modifiers.multiple||this.modifiers.toggle||this.unselectAll(),Tmap.Util.isArray(a)||(a=[a]);var b=this.events.triggerEvent("beforefeaturesselected",{features:a});if(b!==!1){for(var c,d=[],e=0,f=a.length;f>e;++e)c=a[e],this.features[c.fid||c.id]?this.modifiers.toggle&&this.unselect(this.features[c.fid||c.id]):(b=this.events.triggerEvent("beforefeatureselected",{feature:c}),b!==!1&&(this.features[c.fid||c.id]=c,d.push(c),this.events.triggerEvent("featureselected",{feature:c})));this.events.triggerEvent("featuresselected",{features:d})}},hoverSelect:function(a){var b=a?a.fid||a.id:null,c=this.hoverFeature?this.hoverFeature.fid||this.hoverFeature.id:null;c&&c!=b&&(this.events.triggerEvent("outfeature",{feature:this.hoverFeature}),this.hoverFeature=null),b&&b!=c&&(this.events.triggerEvent("hoverfeature",{feature:a}),this.hoverFeature=a)},unselect:function(a){delete this.features[a.fid||a.id],this.events.triggerEvent("featureunselected",{feature:a})},unselectAll:function(){for(var a in this.features)this.unselect(this.features[a])},setMap:function(a){for(var b in this.handlers)this.handlers[b].setMap(a);Tmap.Control.prototype.setMap.apply(this,arguments)},pixelToBounds:function(a){var b=a.add(-this.clickTolerance/2,this.clickTolerance/2),c=a.add(this.clickTolerance/2,-this.clickTolerance/2),d=this.map.getLonLatFromPixel(b),e=this.map.getLonLatFromPixel(c);return new Tmap.Bounds(d.lon,d.lat,e.lon,e.lat)},CLASS_NAME:"Tmap.Control.GetFeature"}),Tmap.Control.NavToolbar=Tmap.Class(Tmap.Control.Panel,{initialize:function(a){Tmap.Control.Panel.prototype.initialize.apply(this,[a]),this.addControls([new Tmap.Control.Navigation,new Tmap.Control.ZoomBox])},draw:function(){var a=Tmap.Control.Panel.prototype.draw.apply(this,arguments);return null===this.defaultControl&&(this.defaultControl=this.controls[0]),a},CLASS_NAME:"Tmap.Control.NavToolbar"}),Tmap.Control.PanPanel=Tmap.Class(Tmap.Control.Panel,{slideFactor:50,slideRatio:null,initialize:function(a){Tmap.Control.Panel.prototype.initialize.apply(this,[a]);var a={slideFactor:this.slideFactor,slideRatio:this.slideRatio};this.addControls([new Tmap.Control.Pan(Tmap.Control.Pan.NORTH,a),new Tmap.Control.Pan(Tmap.Control.Pan.SOUTH,a),new Tmap.Control.Pan(Tmap.Control.Pan.EAST,a),new Tmap.Control.Pan(Tmap.Control.Pan.WEST,a)])},CLASS_NAME:"Tmap.Control.PanPanel"}),Tmap.Control.Pan=Tmap.Class(Tmap.Control.Button,{slideFactor:50,slideRatio:null,direction:null,initialize:function(a,b){this.direction=a,this.CLASS_NAME+=this.direction,Tmap.Control.prototype.initialize.apply(this,[b])},trigger:function(){if(this.map){var a=Tmap.Function.bind(function(a){return this.slideRatio?this.map.getSize()[a]*this.slideRatio:this.slideFactor},this);switch(this.direction){case Tmap.Control.Pan.NORTH:this.map.pan(0,-a("h"));break;case Tmap.Control.Pan.SOUTH:this.map.pan(0,a("h"));break;case Tmap.Control.Pan.WEST:this.map.pan(-a("w"),0);break;case Tmap.Control.Pan.EAST:this.map.pan(a("w"),0)}}},CLASS_NAME:"Tmap.Control.Pan"}),Tmap.Control.Pan.NORTH="North",Tmap.Control.Pan.SOUTH="South",Tmap.Control.Pan.EAST="East",Tmap.Control.Pan.WEST="West",Tmap.Control.ZoomIn=Tmap.Class(Tmap.Control.Button,{trigger:function(){this.map&&this.map.zoomIn()},CLASS_NAME:"Tmap.Control.ZoomIn"}),Tmap.Control.ZoomOut=Tmap.Class(Tmap.Control.Button,{trigger:function(){this.map&&this.map.zoomOut()},CLASS_NAME:"Tmap.Control.ZoomOut"}),Tmap.Control.ZoomPanel=Tmap.Class(Tmap.Control.Panel,{initialize:function(a){Tmap.Control.Panel.prototype.initialize.apply(this,[a]),this.addControls([new Tmap.Control.ZoomIn,new Tmap.Control.ZoomToMaxExtent,new Tmap.Control.ZoomOut])},CLASS_NAME:"Tmap.Control.ZoomPanel"}),Tmap.Control.EditingToolbar=Tmap.Class(Tmap.Control.Panel,{citeCompliant:!1,initialize:function(a,b){Tmap.Control.Panel.prototype.initialize.apply(this,[b]),this.addControls([new Tmap.Control.Navigation]);var c=[new Tmap.Control.DrawFeature(a,Tmap.Handler.Point,{displayClass:"tmControlDrawFeaturePoint",handlerOptions:{citeCompliant:this.citeCompliant}}),new Tmap.Control.DrawFeature(a,Tmap.Handler.Path,{displayClass:"tmControlDrawFeaturePath",handlerOptions:{citeCompliant:this.citeCompliant}}),new Tmap.Control.DrawFeature(a,Tmap.Handler.Polygon,{displayClass:"tmControlDrawFeaturePolygon",handlerOptions:{citeCompliant:this.citeCompliant}})];this.addControls(c)},draw:function(){var a=Tmap.Control.Panel.prototype.draw.apply(this,arguments);return null===this.defaultControl&&(this.defaultControl=this.controls[0]),a},CLASS_NAME:"Tmap.Control.EditingToolbar"}),Tmap.Control.Geolocate=Tmap.Class(Tmap.Control,{geolocation:navigator.geolocation,bind:!0,watch:!1,geolocationOptions:null,destroy:function(){this.deactivate(),Tmap.Control.prototype.destroy.apply(this,arguments)},activate:function(){return this.geolocation?Tmap.Control.prototype.activate.apply(this,arguments)?(this.watch?this.watchId=this.geolocation.watchPosition(Tmap.Function.bind(this.geolocate,this),Tmap.Function.bind(this.failure,this),this.geolocationOptions):this.getCurrentLocation(),!0):!1:(this.events.triggerEvent("locationuncapable"),!1)},deactivate:function(){return this.active&&null!==this.watchId&&this.geolocation.clearWatch(this.watchId),Tmap.Control.prototype.deactivate.apply(this,arguments)},geolocate:function(a){var b=new Tmap.LonLat(a.coords.longitude,a.coords.latitude).transform(new Tmap.Projection("EPSG:4326"),this.map.getProjectionObject());this.bind&&this.map.setCenter(b),this.events.triggerEvent("locationupdated",{position:a,point:new Tmap.Geometry.Point(b.lon,b.lat)})},getCurrentLocation:function(){return!this.active||this.watch?!1:(this.geolocation.getCurrentPosition(Tmap.Function.bind(this.geolocate,this),Tmap.Function.bind(this.failure,this),this.geolocationOptions),!0)},failure:function(a){this.events.triggerEvent("locationfailed",{error:a})},CLASS_NAME:"Tmap.Control.Geolocate"}),Tmap.Symbolizer=Tmap.Class({zIndex:0,initialize:function(a){Tmap.Util.extend(this,a)},clone:function(){var Type=eval(this.CLASS_NAME);return new Type(Tmap.Util.extend({},this))},CLASS_NAME:"Tmap.Symbolizer"}),Tmap.Symbolizer.Point=Tmap.Class(Tmap.Symbolizer,{initialize:function(a){Tmap.Symbolizer.prototype.initialize.apply(this,arguments)},CLASS_NAME:"Tmap.Symbolizer.Point"}),Tmap.Symbolizer.Line=Tmap.Class(Tmap.Symbolizer,{initialize:function(a){Tmap.Symbolizer.prototype.initialize.apply(this,arguments)},CLASS_NAME:"Tmap.Symbolizer.Line"}),Tmap.Symbolizer.Polygon=Tmap.Class(Tmap.Symbolizer,{initialize:function(a){Tmap.Symbolizer.prototype.initialize.apply(this,arguments)},CLASS_NAME:"Tmap.Symbolizer.Polygon"}),Tmap.Symbolizer.Text=Tmap.Class(Tmap.Symbolizer,{initialize:function(a){Tmap.Symbolizer.prototype.initialize.apply(this,arguments)},CLASS_NAME:"Tmap.Symbolizer.Text"}),Tmap.Symbolizer.Raster=Tmap.Class(Tmap.Symbolizer,{initialize:function(a){Tmap.Symbolizer.prototype.initialize.apply(this,arguments)},CLASS_NAME:"Tmap.Symbolizer.Raster"}),Tmap.Lang={code:null,defaultCode:"en",getCode:function(){return Tmap.Lang.code||Tmap.Lang.setCode(),Tmap.Lang.code},setCode:function(a){var b;a||(a="msie"==Tmap.BROWSER_NAME?navigator.userLanguage:navigator.language);var c=a.split("-");if(c[0]=c[0].toLowerCase(),"object"==typeof Tmap.Lang[c[0]]&&(b=c[0]),c[1]){var d=c[0]+"-"+c[1].toUpperCase();"object"==typeof Tmap.Lang[d]&&(b=d)}b||(Tmap.Console.warn("Failed to find Tmap.Lang."+c.join("-")+" dictionary, falling back to default language"),b=Tmap.Lang.defaultCode),Tmap.Lang.code=b},translate:function(a,b){var c=Tmap.Lang[Tmap.Lang.getCode()],d=c&&c[a];return d||(d=a),b&&(d=Tmap.String.format(d,b)),d}},Tmap.i18n=Tmap.Lang.translate,Tmap.Lang.en={unhandledRequest:"Unhandled request return ${statusText}",Permalink:"Permalink",Overlays:"Overlays","Base Layer":"Base Layer",noFID:"Can't update a feature for which there is no FID.",browserNotSupported:"Your browser does not support vector rendering. Currently supported renderers are:\n${renderers}",minZoomLevelError:"The minZoomLevel property is only intended for use with the FixedZoomLevels-descendent layers. That this wfs layer checks for minZoomLevel is a relic of thepast. We cannot, however, remove it without possibly breaking OL based applications that may depend on it. Therefore we are deprecating it -- the minZoomLevel check below will be removed at 3.0. Please instead use min/max resolution setting as described here: http://trac.Tmap.org/wiki/SettingZoomLevels",commitSuccess:"WFS Transaction: SUCCESS ${response}",commitFailed:"WFS Transaction: FAILED ${response}",googleWarning:"The Google Layer was unable to load correctly.<br><br>To get rid of this message, select a new BaseLayer in the layer switcher in the upper-right corner.<br><br>Most likely, this is because the Google Maps library script was either not included, or does not contain the correct API key for your site.<br><br>Developers: For help getting this working correctly, <a href='http://trac.Tmap.org/wiki/Google' target='_blank'>click here</a>",getLayerWarning:"The ${layerType} Layer was unable to load correctly.<br><br>To get rid of this message, select a new BaseLayer in the layer switcher in the upper-right corner.<br><br>Most likely, this is because the ${layerLib} library script was not correctly included.<br><br>Developers: For help getting this working correctly, <a href='http://trac.Tmap.org/wiki/${layerLib}' target='_blank'>click here</a>","Scale = 1 : ${scaleDenom}":"Scale = 1 : ${scaleDenom}",W:"W",E:"E",N:"N",S:"S",Graticule:"Graticule",reprojectDeprecated:"You are using the 'reproject' option on the ${layerName} layer. This option is deprecated: its use was designed to support displaying data over commercial basemaps, but that functionality should now be achieved by using Spherical Mercator support. More information is available from http://trac.Tmap.org/wiki/SphericalMercator.",methodDeprecated:"This method has been deprecated and will be removed in 3.0. Please use ${newMethod} instead.",end:""},Tmap.Spherical=Tmap.Spherical||{},Tmap.Spherical.DEFAULT_RADIUS=6378137,Tmap.Spherical.computeDistanceBetween=function(a,b,c){var d=c||Tmap.Spherical.DEFAULT_RADIUS,e=Math.sin(Math.PI*(b.lon-a.lon)/360),f=Math.sin(Math.PI*(b.lat-a.lat)/360),g=f*f+e*e*Math.cos(Math.PI*a.lat/180)*Math.cos(Math.PI*b.lat/180);return 2*d*Math.atan2(Math.sqrt(g),Math.sqrt(1-g))},Tmap.Spherical.computeHeading=function(a,b){var c=Math.sin(Math.PI*(a.lon-b.lon)/180)*Math.cos(Math.PI*b.lat/180),d=Math.cos(Math.PI*a.lat/180)*Math.sin(Math.PI*b.lat/180)-Math.sin(Math.PI*a.lat/180)*Math.cos(Math.PI*b.lat/180)*Math.cos(Math.PI*(a.lon-b.lon)/180);return 180*Math.atan2(c,d)/Math.PI},Tmap.TileManager=Tmap.Class({cacheSize:256,moveDelay:100,zoomDelay:200,maps:null,tileQueueId:null,tileQueue:null,tileCache:null,tileCacheIndex:null,initialize:function(a){Tmap.Util.extend(this,a),this.maps=[],this.tileQueueId={},this.tileQueue={},this.tileCache={},this.tileCacheIndex=[]},addMap:function(a){if(!this._destroyed){this.maps.push(a),this.tileQueue[a.id]=[];for(var b=0,c=a.layers.length;c>b;++b)this.addLayer({layer:a.layers[b]});a.events.on({move:this.move,zoomend:this.zoomEnd,changelayer:this.changeLayer,addlayer:this.addLayer,preremovelayer:this.removeLayer,scope:this})}},removeMap:function(a){if(!this._destroyed){if(window.clearTimeout(this.tileQueueId[a.id]),a.layers)for(var b=0,c=a.layers.length;c>b;++b)this.removeLayer({layer:a.layers[b]});a.events&&a.events.un({move:this.move,zoomend:this.zoomEnd,changelayer:this.changeLayer,addlayer:this.addLayer,preremovelayer:this.removeLayer,scope:this}),delete this.tileQueue[a.id],delete this.tileQueueId[a.id],Tmap.Util.removeItem(this.maps,a)}},move:function(a){this.updateTimeout(a.object,this.moveDelay)},zoomEnd:function(a){this.updateTimeout(a.object,this.zoomDelay)},changeLayer:function(a){("visibility"===a.property||"params"===a.property)&&this.updateTimeout(a.object,0)},addLayer:function(a){var b=a.layer;if(b instanceof Tmap.Layer.Grid){b.events.on({addtile:this.addTile,retile:this.clearTileQueue,scope:this});var c,d,e;for(c=b.grid.length-1;c>=0;--c)for(d=b.grid[c].length-1;d>=0;--d)e=b.grid[c][d],this.addTile({tile:e}),e.url&&this.manageTileCache({object:e})}},removeLayer:function(a){var b=a.layer;if(b instanceof Tmap.Layer.Grid&&(this.clearTileQueue({object:b}),b.events&&b.events.un({addtile:this.addTile,retile:this.clearTileQueue,scope:this}),b.grid)){var c,d,e;for(c=b.grid.length-1;c>=0;--c)for(d=b.grid[c].length-1;d>=0;--d)e=b.grid[c][d],this.unloadTile({object:e}),e.url&&this.manageTileCache({object:e})}},updateTimeout:function(a,b){window.clearTimeout(this.tileQueueId[a.id]),this.tileQueue[a.id].length&&(this.tileQueueId[a.id]=window.setTimeout(Tmap.Function.bind(function(){this.drawTilesFromQueue(a)},this),b))},addTile:function(a){a.tile.events.on({beforedraw:this.queueTileDraw,beforeload:this.manageTileCache,loadend:this.addToCache,unload:this.unloadTile,scope:this})},unloadTile:function(a){var b=a.object;b.events.un({beforedraw:this.queueTileDraw,beforeload:this.manageTileCache,loadend:this.addToCache,unload:this.unloadTile,scope:this}),Tmap.Util.removeItem(this.tileQueue[b.layer.map.id],b)},queueTileDraw:function(a){var b=a.object,c=!1,d=b.layer,e=d.getURL(b.bounds),f=this.tileCache[e];if(f&&"olTileImage"!==f.className&&(delete this.tileCache[e],Tmap.Util.removeItem(this.tileCacheIndex,e),f=null),d.url&&(d.async||!f)){var g=this.tileQueue[d.map.id];~Tmap.Util.indexOf(g,b)||g.push(b),c=!0}return!c},drawTilesFromQueue:function(a){for(var b=this.tileQueue[a.id];b.length;)b.shift().draw(!0)},manageTileCache:function(a){var b=a.object,c=this.tileCache[b.url];!c||c.parentNode&&!Tmap.Element.hasClass(c.parentNode,"olBackBuffer")||(b.layer.backBuffer&&(c.style.opacity=0,c.style.visibility="hidden"),c.id=null,b.setImage(c),Tmap.Util.removeItem(this.tileCacheIndex,b.url),this.tileCacheIndex.push(b.url))},addToCache:function(a){var b=a.object;this.tileCache[b.url]||Tmap.Element.hasClass(b.imgDiv,"olImageLoadError")||(this.tileCacheIndex.length>=this.cacheSize&&(delete this.tileCache[this.tileCacheIndex[0]],this.tileCacheIndex.shift()),this.tileCache[b.url]=b.imgDiv,this.tileCacheIndex.push(b.url))},clearTileQueue:function(a){for(var b=a.object,c=this.tileQueue[b.map.id],d=c.length-1;d>=0;--d)c[d].layer===b&&c.splice(d,1)},destroy:function(){for(var a=this.maps.length-1;a>=0;--a)this.removeMap(this.maps[a]);this.maps=null,this.tileQueue=null,this.tileQueueId=null,this.tileCache=null,this.tileCacheIndex=null,this._destroyed=!0}}),Tmap.WPSClient=Tmap.Class({servers:null,version:"1.0.0",lazy:!1,events:null,initialize:function(a){Tmap.Util.extend(this,a),this.events=new Tmap.Events(this),this.servers={};for(var b in a.servers)this.servers[b]="string"==typeof a.servers[b]?{url:a.servers[b],version:this.version,processDescription:{}}:a.servers[b]},execute:function(a){var b=this.getProcess(a.server,a.process);b.execute({inputs:a.inputs,success:a.success,scope:a.scope})},getProcess:function(a,b){var c=new Tmap.WPSProcess({client:this,server:a,identifier:b});return this.lazy||c.describe(),c},describeProcess:function(a,b,c,d){var e=this.servers[a];e.processDescription[b]?window.setTimeout(function(){c.call(d,e.processDescription[b])},0):b in e.processDescription?this.events.register("describeprocess",this,function f(a){a.identifier===b&&(this.events.unregister("describeprocess",this,f),c.call(d,a.raw))}):(e.processDescription[b]=null,Tmap.Request.GET({url:e.url,params:{SERVICE:"WPS",VERSION:e.version,REQUEST:"DescribeProcess",IDENTIFIER:b},success:function(a){e.processDescription[b]=a.responseText,this.events.triggerEvent("describeprocess",{identifier:b,raw:a.responseText})},scope:this}))},destroy:function(){this.events.destroy(),this.events=null,this.servers=null},CLASS_NAME:"Tmap.WPSClient"}),Tmap.WPSProcess=Tmap.Class({client:null,server:null,identifier:null,description:null,localWPS:"http://geoserver/wps",formats:null,chained:0,executeCallbacks:null,initialize:function(a){Tmap.Util.extend(this,a),this.executeCallbacks=[],this.formats={"application/wkt":new Tmap.Format.WKT,"application/json":new Tmap.Format.GeoJSON}},describe:function(a){if(a=a||{},this.description){if(a.callback){var b=this.description;window.setTimeout(function(){a.callback.call(a.scope,b)},0)}}else this.client.describeProcess(this.server,this.identifier,function(b){this.description||this.parseDescription(b),a.callback&&a.callback.call(a.scope,this.description)},this)},configure:function(a){return this.describe({callback:function(){var b,c,d,e=this.description,f=a.inputs;for(c=0,d=e.dataInputs.length;d>c;++c)b=e.dataInputs[c],this.setInputData(b,f[b.identifier]);a.callback&&a.callback.call(a.scope)},scope:this}),this},execute:function(a){this.configure({inputs:a.inputs,callback:function(){var b=this,c=this.getOutputIndex(b.description.processOutputs,a.output);b.setResponseForm({outputIndex:c}),function d(){return Tmap.Util.removeItem(b.executeCallbacks,d),0!==b.chained?void b.executeCallbacks.push(d):void Tmap.Request.POST({url:b.client.servers[b.server].url,data:(new Tmap.Format.WPSExecute).write(b.description),success:function(d){var e=b.description.processOutputs[c],f=b.findMimeType(e.complexOutput.supported.formats),g=b.formats[f].read(d.responseText);if(g instanceof Tmap.Feature.Vector&&(g=[g]),a.success){var h={};h[a.output||"result"]=g,a.success.call(a.scope,h)}},scope:b})}()},scope:this})},output:function(a){return new Tmap.WPSProcess.ChainLink({process:this,output:a})},parseDescription:function(a){var b=this.client.servers[this.server];this.description=(new Tmap.Format.WPSDescribeProcess).read(b.processDescription[this.identifier]).processDescriptions[this.identifier]},setInputData:function(a,b){if(delete a.data,delete a.reference,b instanceof Tmap.WPSProcess.ChainLink)++this.chained,a.reference={method:"POST",href:b.process.server===this.server?this.localWPS:this.client.servers[b.process.server].url},b.process.describe({callback:function(){--this.chained,this.chainProcess(a,b)},scope:this});else{a.data={};var c=a.complexData;if(c){var d=this.findMimeType(c.supported.formats);a.data.complexData={mimeType:d,value:this.formats[d].write(this.toFeatures(b))}}else a.data.literalData={value:b}}},setResponseForm:function(a){a=a||{};var b=this.description.processOutputs[a.outputIndex||0];this.description.responseForm={rawDataOutput:{identifier:b.identifier,mimeType:this.findMimeType(b.complexOutput.supported.formats,a.supportedFormats)}}},getOutputIndex:function(a,b){var c;if(b){for(var d=a.length-1;d>=0;--d)if(a[d].identifier===b){c=d;break}}else c=0;return c},chainProcess:function(a,b){var c=this.getOutputIndex(b.process.description.processOutputs,b.output);a.reference.mimeType=this.findMimeType(a.complexData.supported.formats,b.process.description.processOutputs[c].complexOutput.supported.formats);var d={};for(d[a.reference.mimeType]=!0,b.process.setResponseForm({outputIndex:c,supportedFormats:d}),a.reference.body=b.process.description;this.executeCallbacks.length>0;)this.executeCallbacks[0]()},toFeatures:function(a){var b=Tmap.Util.isArray(a);b||(a=[a]);for(var c,d=new Array(a.length),e=0,f=a.length;f>e;++e)c=a[e],d[e]=c instanceof Tmap.Feature.Vector?c:new Tmap.Feature.Vector(c);return b?d:d[0]},findMimeType:function(a,b){b=b||this.formats;for(var c in a)if(c in b)return c},CLASS_NAME:"Tmap.WPSProcess"}),Tmap.WPSProcess.ChainLink=Tmap.Class({process:null,output:null,initialize:function(a){Tmap.Util.extend(this,a)},CLASS_NAME:"Tmap.WPSProcess.ChainLink"}),Tmap.Theme={},Tmap.Theme.urlWMS="https://topopen.tmap.co.kr/tmapv20","http:"==location.protocol?Tmap.Theme.urlJS="https://topopen.tmap.co.kr/tmapv20/js?version=2&type=":Tmap.Theme.urlJS="https://topopen.tmap.co.kr/tmapv20/js?version=1&type=",Tmap.Theme.Bicycle=Tmap.Class({autoActivate:!1,activeStatus:!1,map:null,bicycle:null,facility:null,initialize:function(a){a&&(this.setMap(a),a.events.register("zoomtweenend",this,this.layerVisibility))},setMap:function(a){this.map=a,this.autoActivate&&this.activate()},layerVisibility:function(a){var b=a&&a.targetZoom?a.targetZoom:this.map.getZoom();8>b?this.layerDisplay(this.bicycle,!1):this.layerDisplay(this.bicycle,!0),15>b?this.layerDisplay(this.facility,!1):this.layerDisplay(this.facility,!0)},layerDisplay:function(a,b){a&&(a.visibility=b,a.display(b))},drawBicycle:function(){this.map.getLayersByName("bicycle Layer").length>0&&this.map.removeLayer(this.bicycle),this.tileParamFunc();var a={};a.layers="bicCompRoad_lv"+this.map.getZoom(),a.FORMAT="PNG",a.transparent=!0,a.isBaseLayer=!1,a.themeType="bicycle",this.bicycle=new Tmap.Layer.Theme("bicycle Layer",Tmap.Theme.urlWMS+"/brp",a),this.map.addLayer(this.bicycle)},drawFacility:function(){this.map.getLayersByName("facility Layer").length>0&&this.map.removeLayer(this.facility);var a={};a.layers="facility_LV"+this.map.getZoom(),a.FORMAT="PNG",a.transparent=!0,a.isBaseLayer=!1,a.themeType="facility",this.facility=new Tmap.Layer.Theme("facility Layer",Tmap.Theme.urlWMS+"/brp",a),this.map.addLayer(this.facility)},activate:function(){this.activeStatus||(this.drawBicycle(),this.drawFacility(),this.layerVisibility(),this.activeStatus=!0)},deactivate:function(){this.activeStatus&&(this.map.getLayersByName("bicycle Layer").length>0&&(this.map.removeLayer(this.bicycle),this.bicycle.destroy()),this.map.getLayersByName("facility Layer").length>0&&(this.map.removeLayer(this.facility),this.facility.destroy()),this.activeStatus=!1)},tileParamFunc:function(){try{var a="jsTileBi",b=Tmap.TData.prototype.getXMLHttpRequest(),c=Tmap.Theme.urlJS;c+=a+"&appKey="+Tmap.Util.getParameterFromURL("appKey"),b.scope=this,b.open("GET",c),b.send()}catch(d){}},CLASS_NAME:"Tmap.Theme.Bicycle"}),Tmap.Theme.Traffic=Tmap.Class({autoActivate:!1,activeStatus:!1,map:null,wms:null,initialize:function(a){a&&(this.setMap(a),a.events.register("zoomtweenend",this,this.layerVisibility))},setMap:function(a){this.map=a,this.autoActivate&&this.activate()},layerVisibility:function(a){var b=a&&a.targetZoom?a.targetZoom:this.map.getZoom();5>=b?this.layerDisplay(this.wms,!1):this.layerDisplay(this.wms,!0)},layerDisplay:function(a,b){a&&(a.visibility=b,a.display(b))},drawWMS:function(){this.map.getLayersByName("TmapWMS").length>0&&this.map.removeLayer(this.wms),this.tileParamFunc();var a={};a.layers="LV"+this.map.getZoom(),a.FORMAT="PNG",a.transparent=!0,a.isBaseLayer=!1,a.themeType="traffic",this.wms=new Tmap.Layer.Theme("TmapWMS",Tmap.Theme.urlWMS+"/rtti",a),this.map.addLayer(this.wms)},activate:function(){this.activeStatus||(this.drawWMS(),this.layerVisibility(),this.activeStatus=!0)},deactivate:function(){this.activeStatus&&(this.wms.destroy(),this.activeStatus=!1)},tileParamFunc:function(){try{var a="jsTileRtti",b=Tmap.TData.prototype.getXMLHttpRequest(),c=Tmap.Theme.urlJS;c+=a+"&appKey="+Tmap.Util.getParameterFromURL("appKey"),b.scope=this,b.open("GET",c),b.send()}catch(d){}},CLASS_NAME:"Tmap.Theme.Traffic"}),Tmap.Layer.Theme=Tmap.Class(Tmap.Layer.WMS,{getLayersName:function(){var a=this.map.getZoom();switch(this.params.THEMETYPE){case"bicycle":if(a>=8)return a>17&&(a=17),"bicCompRoad_lv"+a;break;case"facility":if(a>=15)return a>17&&(a=17),"facility_LV"+a;break;case"traffic":if(a>5)return a>17&&(a=17),"LV"+a}return""},moveTo:function(a,b,c){if(this.params.LAYERS=this.getLayersName(),""!=this.params.LAYERS&&this.params.LAYERS&&(Tmap.Layer.HTTPRequest.prototype.moveTo.apply(this,arguments),a=a||this.map.getExtent(),null!=a)){var d=!this.grid.length||b,e=this.getTilesBounds(),f=this.map.getResolution();this.singleTile?(d||!c&&!e.containsBounds(a))&&(b&&"resize"!==this.transitionEffect&&this.removeBackBuffer(),b&&"resize"!==this.transitionEffect||this.applyBackBuffer(f),this.initSingleTile(a)):(d=d||!e.intersectsBounds(a,{worldBounds:this.map.baseLayer.wrapDateLine&&this.map.getMaxExtent()}),d?(!b||"resize"!==this.transitionEffect&&this.gridResolution!==f||this.applyBackBuffer(f),this.initGriddedTiles(a)):this.moveGriddedTiles())}},CLASS_NAME:"Tmap.Layer.Theme"}),Tmap.Legend=Tmap.Class({brpLayer:null,brppLayer2:null,le:null,map:null,arg:null,mapId:null,top:null,left:null,browser:null,initialize:function(){if(this.mapId=map.div.id,null!=arguments[0]){var a=arguments[0];this.arg=a}le=this,le.activate(),window.browser={into:navigator.userAgent.toLocaleLowerCase(),isIE7:function(){return-1!=this.into.indexOf("msie 7")?!0:!1}},this.browser=browser.isIE7()},setMap:function(a){this.map=a,this.map.events.register("zoomend",this.map,this.activate)},activate:function(){var a=map.getSize().h,b=map.getSize().w,c=document.getElementById(le.mapId).offsetTop,d=document.getElementById(le.mapId).offsetLeft,e='<div id="index_e"><div class="col"><img id="x_1" src="https://topopentile1.tmap.co.kr/tmaplibv20/img/btn_close.gif" alt="\ucc3d\ub2eb\uae30" /></div><div class="exp"><img id="x_m" src="https://topopentile1.tmap.co.kr/tmaplibv20/img/btn_reduced.gif" alt="\ucc3d\ucd95\uc18c" /></div></div>';if(null==document.getElementById("index_e")){var f=document.createElement("div");f.innerHTML=e,document.getElementById(le.mapId).appendChild(f)}1==le.browser?"lt"==le.arg.position?(le.top=c+60+"px",le.left=d+160+"px"):"rt"==le.arg.position?(le.top=c+60+"px",le.left=b-511+d+65+"px"):"lb"==le.arg.position?(le.top=a-206+c+50+"px",le.left=d+15+65+"px"):"rb"==le.arg.position?(le.top=a-201+c+50+"px",le.left=b-511+d+65+"px"):(le.top=a-201+c+50+"px",le.left=b-511+d+65+"px"):"lt"==le.arg.position?(le.top=c+10+"px",le.left=d+95+"px"):"rt"==le.arg.position?(le.top=c+10+"px",le.left=b-511+d+"px"):"lb"==le.arg.position?(le.top=a-206+c+"px",le.left=d+15+"px"):"rb"==le.arg.position?(le.top=a-201+c+"px",le.left=b-511+d+"px"):(le.top=a-201+c+"px",le.left=b-511+d+"px"),document.getElementById("index_e").style.top=le.top,document.getElementById("index_e").style.left=le.left,document.getElementById("index_e").style.display="block",document.getElementById("x_1").onclick=le.close,document.getElementById("x_m").onclick=le.min},close:function(){document.getElementById("index_e").style.display="none"},close2:function(){document.getElementById("index_r").style.display="none"},min:function(){document.getElementById("index_e").style.display="none";var a=map.getSize().h,b=map.getSize().w,c=document.getElementById(le.mapId).offsetTop,d=document.getElementById(le.mapId).offsetLeft,e='<div id="index_r"><div class="col"><img id="x_2" src="https://topopentile1.tmap.co.kr/tmaplibv20/img/btn_close.gif" alt="\ucc3d\ub2eb\uae30" /></div><div class="red"><img id="x_p" src="https://topopentile1.tmap.co.kr/tmaplibv20/img/btn_expand.gif" alt="\ucc3d\ud655\ub300" /></div></div>';if(null==document.getElementById("index_r")){var f=document.createElement("div");f.innerHTML=e,document.getElementById(le.mapId).appendChild(f)}1==le.browser?"lt"==le.arg.position?(le.top=c+60+"px",le.left=d+160+"px"):"rt"==le.arg.position?(le.top=c+60+"px",le.left=b-187+d+65+"px"):"lb"==le.arg.position?(le.top=a-40+c+50+"px",le.left=d+80+"px"):"rb"==le.arg.position?(le.top=a-40+c+50+"px",le.left=b-187+d+65+"px"):(le.top=a-40+c+50+"px",le.left=b-187+d+65+"px"):"lt"==le.arg.position?(le.top=c+10+"px",le.left=d+95+"px"):"rt"==le.arg.position?(le.top=c+10+"px",le.left=b-187+d+"px"):"lb"==le.arg.position?(le.top=a-40+c+"px",le.left=d+15+"px"):"rb"==le.arg.position?(le.top=a-40+c+"px",le.left=b-187+d+"px"):(le.top=a-40+c+"px",le.left=b-187+d+"px"),document.getElementById("index_r").style.top=le.top,document.getElementById("index_r").style.left=le.left,document.getElementById("index_r").style.display="block",document.getElementById("x_2").onclick=le.close2,document.getElementById("x_p").onclick=le.plus},plus:function(){document.getElementById("index_r").style.display="none",le.activate()},reactivate:function(){null!=document.getElementById("index_e")&&("none"==document.getElementById("index_e").style.display?le.min():le.activate())},deactivate:function(){document.getElementById("index_e").style.display="block",document.getElementById("index_r").style.display="block"},CLASS_NAME:"Tmap.Legend"}),Tmap.Format.QueryStringFilter.prototype.write=function(a,b){b=b||{};var c=a.CLASS_NAME,d=c.substring(c.lastIndexOf(".")+1);switch(d){case"Spatial":switch(a.type){case Tmap.Filter.Spatial.BBOX:b.minLon=a.value.left,b.minLat=a.value.bottom,b.maxLon=a.value.right,b.maxLat=a.value.top,b.bbox=a.value.toArray(),this.srsInBBOX&&a.projection&&b.bbox.push(a.projection.getCode());break;case Tmap.Filter.Spatial.DWITHIN:b.tolerance=a.distance;case Tmap.Filter.Spatial.WITHIN:b.lon=a.value.x,b.lat=a.value.y;break;default:Tmap.Console.warn("Unknown spatial filter type "+a.type)}break;case"Comparison":var e=cmpToStr[a.type];if(void 0!==e){var f=a.value;a.type==Tmap.Filter.Comparison.LIKE&&(f=regex2value(f),this.wildcarded&&(f="%"+f+"%")),b[a.property+"__"+e]=f,b.queryable=b.queryable||[],b.queryable.push(a.property)}else Tmap.Console.warn("Unknown comparison filter type "+a.type);break;case"Logical":if(a.type===Tmap.Filter.Logical.AND)for(var g=0,h=a.filters.length;h>g;g++)b=this.write(a.filters[g],b);else Tmap.Console.warn("Unsupported logical filter type "+a.type);break;default:
Tmap.Console.warn("Unknown filter type "+d)}return b},Tmap.Control.ScaleLine.prototype.bottomOutUnits="",Tmap.Control.PanZoomBar.prototype.zoomStopWidth=8,Tmap.Control.PanZoomBar.prototype.zoomStopHeight=6,Tmap.Control.PanZoomBar.prototype.moveZoomBar=function(){var a=(this.map.getNumZoomLevels()-1-this.map.getZoom())*this.zoomStopHeight+this.startTop+-2;this.slider.style.top=a+"px"},Tmap.Layer.Grid.prototype.branch=0,Tmap.Layer.Grid.prototype.setMap=function(a){Tmap.Layer.HTTPRequest.prototype.setMap.call(this,a),Tmap.Element.addClass(this.div,this.className),this.branch=this.map.getBranch()},Tmap.Control.prototype.onMapResize=function(){},Tmap.theMap.prototype.updateSize=function(){var a=this.getCurrentSize();if(a&&!isNaN(a.h)&&!isNaN(a.w)){this.events.clearMouseCache();var b=this.getSize();if(null==b&&(this.size=b=a),!a.equals(b)){this.size=a;for(var c=0,d=this.layers.length;d>c;c++)this.layers[c].onMapResize();for(c=0,d=this.controls.length;d>c;c++)this.controls[c].onMapResize();var e=this.getCachedCenter();if(null!=this.baseLayer&&null!=e){var f=this.getZoom();this.zoom=null,this.setCenter(e,f)}}}this.events.triggerEvent("updatesize")},Tmap.Control.Zoom.prototype.onMapResize=function(){var a=this.div;a&&0!=this.map.getBranch()&&(a.style.background="none",a.style["border-radius"]="0px",a.style.top="17px",a.style.left="8px",a.style.transform="scale(1.5,1.5)",a.style["-ms-transform"]="scale(1.5,1.5)",a.style["-webkit-transform"]="scale(1.5,1.5)",a.style["-o-transform"]="scale(1.5,1.5)",a.style["-moz-transform"]="scale(1.5,1.5)")},Tmap.IMAGE_RELOAD_ATTEMPTS=2,Tmap.TmapAppInvoke=Tmap.Class({alert:!1,IOS:"ios",Android:"android",SK:"sk",KU:"ku",client:"sk",platform:"auto",url:{sk:"tmap://",ku:"tmap://"},param:["viewmap","search","goto"],paramObj:{},title:"Tmap",lonlat:null,map:null,xmlHttp:null,initialize:function(a){this.setMap(a)},setMap:function(a){null==this.map&&(this.map=a)},invoke:function(a){if(a)for(var b in a)this[b]=a[b];if(this.title&&(this.title=encodeURIComponent(this.title)),this.lonlat?this.lonlat.transform("EPSG:3857","EPSG:4326"):this.lonlat=this.map.getCenter().transform("EPSG:3857","EPSG:4326"),"auto"==this.platform){var c=this.map.getBranch();if(1==c||6==c)this.platform=this.IOS;else{if(2!=c)return void this.alertor("\uc9c0\uc6d0\ud558\uc9c0 \uc54a\ub294 OS \uc785\ub2c8\ub2e4.");this.platform=this.Android}}this.callURL()},callURL:function(){window.open(this.getURLString(),"_self");this.callLog("0"),this.initParams()},getURLString:function(){var a={ios:"PosX",android:"x"},b={ios:"PosY",android:"y"},c=this.url[this.client];switch(this.platform){case this.IOS:c+="?viewmap="+this.title;break;case this.Android:c+="viewmap?name="+this.title}return c+=this.setKeyValue(a[this.platform],this.lonlat.lon),c+=this.setKeyValue(b[this.platform],this.lonlat.lat)},initParams:function(){this.lonlat=null,this.title="Tmap",this.client="sk",this.platform="auto",this.alert=null},setKeyValue:function(a,b,c){return c?a+"="+b:"&"+a+"="+b},alertor:function(a){this.alert&&alert(a)},callLog:function(a){this.xmlHttp=new XMLHttpRequest,this.xmlHttp._this=this,this.xmlHttp.open("GET","https://topopen.tmap.co.kr/tmapv20/invokeStatistics?version=1&bizAppId="+a+"&format=xml&invokeCate=B0&invokeResult=su",!0),this.xmlHttp.onreadystatechange=function(a){},this.xmlHttp.setRequestHeader("appKey",Tmap.Util.getParameterFromURL("appKey")),this.xmlHttp.send()}}),Tmap.theMap.prototype.animation=!1,Tmap.theMap.prototype.zoomTo=function(a,b){var c=this;if(c.isValidZoomLevel(a))if(c.baseLayer.wrapDateLine&&(a=c.adjustZoom(a)),c.events.triggerEvent("zoomstart",{currentZoom:c.getZoom(),targetZoom:a}),""!=c.transitionEffect&&c.animation||(c.zoomTween=!1),c.zoomTween){var d=c.getResolution(),e=c.getResolutionForZoom(a),f={scale:1},g={scale:d/e,targetZoom:a};if(c.zoomTween.playing&&c.zoomTween.duration<3*c.zoomDuration)c.zoomTween.finish={scale:c.zoomTween.finish.scale*g.scale};else{if(!b){var h=c.getSize();b={x:h.w/2,y:h.h/2}}if(""==c.transitionEffect||!c.animation){var i=b?c.getZoomTargetCenter(b,c.getResolutionForZoom(a)):null;return c.events.triggerEvent("zoomtweenend",{targetZoom:a}),void c.setCenter(i,a)}c.zoomTween.start(f,g,c.zoomDuration,{minFrameRate:30,callbacks:{eachStep:function(a){var d=c.layerContainerOriginPx,e=a.scale.toFixed(3),f=(e-1)*(d.x-b.x)|0,g=(e-1)*(d.y-b.y)|0;c.applyTransform(d.x+f,d.y+g,e)},done:function(a){c.applyTransform();var d=c.getResolution()/a.scale,e=c.getZoomForResolution(d,!0);c.events.triggerEvent("zoomtweenend",{targetZoom:e}),c.moveTo(c.getZoomTargetCenter(b,d),e,!0)}}})}}else{var i=b?c.getZoomTargetCenter(b,c.getResolutionForZoom(a)):null;c.events.triggerEvent("zoomtweenend",{targetZoom:a}),c.setCenter(i,a)}},Tmap.Control.DragPan.prototype.panMapDone=function(a){if(this.panned){var b=null;if(this.kinetic&&this.map.animation&&(b=this.kinetic.end(a)),this.map.pan(this.handler.last.x-a.x,this.handler.last.y-a.y,{dragging:!!b,animate:!1}),b){var c=this;this.kinetic.move(b,function(a,b,d){c.map.pan(a,b,{dragging:!d,animate:!1})})}this.panned=!1}},Tmap.theMap.prototype.initialize=function(a,b){1===arguments.length&&"object"==typeof a&&(b=a,a=b&&b.div),b.mapTileWidth?this.tileSize=new Tmap.Size(b.mapTileWidth,b.mapTileHeight):this.tileSize=new Tmap.Size(256,256),this.paddingForPopups=new Tmap.Bounds(15,15,15,15),this.theme=Tmap._getScriptLocation(),"resize"==this.transitionEffect?this.theme+="theme/default/style_effect.css":this.theme+="theme/default/style.css",this.options=Tmap.Util.extend({},b),Tmap.Util.extend(this,b);var c=this.projection instanceof Tmap.Projection?this.projection.projCode:this.projection;Tmap.Util.applyDefaults(this,Tmap.Projection.defaults[c]),!this.maxExtent||this.maxExtent instanceof Tmap.Bounds||(this.maxExtent=new Tmap.Bounds(this.maxExtent)),!this.minExtent||this.minExtent instanceof Tmap.Bounds||(this.minExtent=new Tmap.Bounds(this.minExtent)),!this.restrictedExtent||this.restrictedExtent instanceof Tmap.Bounds||(this.restrictedExtent=new Tmap.Bounds(this.restrictedExtent)),!this.center||this.center instanceof Tmap.LonLat||(this.center=new Tmap.LonLat(this.center)),this.layers=[],this.id=Tmap.Util.createUniqueID("Tmap.Map_"),this.div=Tmap.Util.getElement(a),this.div||(this.div=document.createElement("div"),this.div.style.height="1px",this.div.style.width="1px"),Tmap.Element.addClass(this.div,"tmMap");var d=this.id+"_Tmap_ViewPort";if(this.viewPortDiv=Tmap.Util.createDiv(d,null,null,null,"relative",null,"hidden"),this.viewPortDiv.style.width="100%",this.viewPortDiv.style.height="100%",this.viewPortDiv.className="tmMapViewport",this.div.appendChild(this.viewPortDiv),this.events=new Tmap.Events(this,this.viewPortDiv,null,this.fallThrough,{includeXY:!0}),this.tileManager&&this.tileManager.addMap(this),d=this.id+"_Tmap_Container",this.layerContainerDiv=Tmap.Util.createDiv(d),this.layerContainerDiv.style.zIndex=this.Z_INDEX_BASE.Popup-1,this.layerContainerOriginPx={x:0,y:0},this.applyTransform(),this.viewPortDiv.appendChild(this.layerContainerDiv),this.updateSize(),this.eventListeners instanceof Object&&this.events.on(this.eventListeners),this.autoUpdateSize===!0&&(this.updateSizeDestroy=Tmap.Function.bind(this.updateSize,this),Tmap.Event.observe(window,"resize",this.updateSizeDestroy)),this.theme){for(var e=!0,f=document.getElementsByTagName("link"),g=0,h=f.length;h>g;++g)if(Tmap.Util.isEquivalentUrl(f.item(g).href,this.theme)){e=!1;break}if(e){var i=document.createElement("link");i.setAttribute("rel","stylesheet"),i.setAttribute("type","text/css"),i.setAttribute("href",this.theme),document.getElementsByTagName("head")[0].appendChild(i)}}null==this.controls&&(this.controls=[],null!=Tmap.Control&&(Tmap.Control.Navigation?this.controls.push(new Tmap.Control.Navigation):Tmap.Control.TouchNavigation&&this.controls.push(new Tmap.Control.TouchNavigation),Tmap.Control.Zoom?this.controls.push(new Tmap.Control.Zoom):Tmap.Control.PanZoom&&this.controls.push(new Tmap.Control.PanZoom),Tmap.Control.ArgParser&&this.controls.push(new Tmap.Control.ArgParser),Tmap.Control.Attribution&&this.controls.push(new Tmap.Control.Attribution)));for(var g=0,h=this.controls.length;h>g;g++)this.addControlToMap(this.controls[g]);this.popups=[],this.unloadDestroy=Tmap.Function.bind(this.destroy,this),Tmap.Event.observe(window,"unload",this.unloadDestroy),b&&b.layers&&(delete this.center,delete this.zoom,this.addLayers(b.layers),b.center&&!this.getCenter()&&this.setCenter(b.center,b.zoom)),this.panMethod&&(this.panTween=new Tmap.Tween(this.panMethod)),this.zoomMethod&&this.applyTransform.transform&&(this.zoomTween=new Tmap.Tween(this.zoomMethod))},Tmap.Control.Space=Tmap.Class(Tmap.Control,{PArr:[],LPoint:null,LLine:null,PPop:[],LType:0,PStyleDistance:{},LStyleDistance:{},PStyleArea:{},LStyleArea:{},type:"distance",mercator:null,katech:null,onRightStatus:!1,activateBoolean:!1,contextFunction:null,resetStatus:!1,initialize:function(a){Tmap.Util.extend(this,a),this.mercator=new Tmap.Projection("EPSG:3857"),this.katech=new Tmap.Projection("KATECH"),this.PStyleDistance={fillColor:"#FF0000",strokeColor:"#FF0000",pointRadius:2},this.LStyleDistance={fillColor:"#FF0000",fillOpacity:.1,strokeColor:"#FF0000",strokeOpacity:.4,strokeWidth:2},this.PStyleArea={fillColor:"#0000FF",strokeColor:"#0000FF",pointRadius:2},this.LStyleArea={fillColor:"#0000FF",fillOpacity:.1,strokeColor:"#0000FF",strokeOpacity:.4,strokeWidth:2},window.uniqueTmapDistanceSpaceClassThis=this,window.uniqueTmapDistanceRightFunction=this.onRightClick,window.uniqueTmapDistanceResetFunction=this.resetSpace,document.oncontextmenu=function(){return uniqueTmapDistanceRightFunction.apply(uniqueTmapDistanceSpaceClassThis),!1}},destroy:function(){if(window.uniqueTmapDistanceSpaceClassThis=null,window.uniqueTmapDistanceRightFunction=null,window.uniqueTmapDistanceResetFunction=null,this.events&&(this.eventListeners&&this.events.un(this.eventListeners),this.events.destroy(),this.events=null),this.eventListeners=null,this.handler&&(this.handler.destroy(),this.handler=null),this.handlers){for(var a in this.handlers)this.handlers.hasOwnProperty(a)&&"function"==typeof this.handlers[a].destroy&&this.handlers[a].destroy();this.handlers=null}this.map&&(this.map.removeControl(this),this.map=null),this.div=null},setMap:function(a){this.map=a,this.handler&&this.handler.setMap(a),this.addLayerForSpace(a),this.autoActivate&&this.activate()},draw:function(){return!1},activate:function(){this.map&&(this.PArr.length>0&&this.deactivate(),"distance"==this.type.toLowerCase()?this.toDistance():"area"==this.type.toLowerCase()&&this.toArea())},deactivate:function(){this.setEventSwitch("unregister"),this.resetSpace()},destroy:function(){this.deactivate(),this.LLine.removeAllFeatures(),this.LPoint.removeAllFeatures(),this.map.removeLayer(this.LLine),this.map.removeLayer(this.LPoint),this.PStyleDistance=null,this.LStyleDistance=null,this.PStyleArea=null,this.LStyleArea=null,Tmap.Control.prototype.destroy.apply(this)},addLayerForSpace:function(a){this.LLine=new Tmap.Layer.Vector("spaceLine"),a.addLayer(this.LLine),this.LPoint=new Tmap.Layer.Vector("space"),a.addLayer(this.LPoint)},onRightClick:function(){if(this.LType=0,this.setEventSwitch("unregister"),0!=this.PPop.length){var a=this.PPop[this.PPop.length-1],b=a.contentHTML.split("<hr>")[0];this.onRightStatus||(b="<div class='tmDistanceCloseBox' onclick='uniqueTmapDistanceResetFunction.apply(uniqueTmapDistanceSpaceClassThis);return false;'></div>"+b),a.setContentHTML(b),this.onRightStatus=!0}},setLayerStyle:function(a){this.LPoint.style=this["PStyle"+this.getCamel(a)],this.LLine.style=this["LStyle"+this.getCamel(a)]},toDistance:function(){this.LType=1,this.setLayerStyle("distance"),this.setEventSwitch("register"),this.onRightStatus=!1,this.resetStatus=!1},toArea:function(){this.LType=2,this.setLayerStyle("area"),this.setEventSwitch("register"),this.onRightStatus=!1,this.resetStatus=!1},resetSpace:function(){this.resetStatus=!0;for(var a=this.PPop.length,b=0;a>b;b++)this.PPop[b]&&this.map.removePopup(this.PPop[b]);this.PPop=[],this.PArr=[],this.LLine.removeAllFeatures(),this.LPoint.removeAllFeatures()},setEventSwitch:function(a){switch(a){case"register":for(var b=this.map.events.listeners.click,c=b.length,d=c-1;d>=0;d--)if(b[d].func==this.addPoint)return;this.map.events[a]("click",{map:this.map,_this:this},this.addPoint);break;case"unregister":for(var b=this.map.events.listeners.click,c=b.length,d=c-1;d>=0;d--)b[d].func==this.addPoint&&b.splice(d,1)}},addPoint:function(a){if(1!=this._this.onRightStatus){if(1==this._this.resetStatus)return void(this._this.resetStatus=!1);var b,c={};try{c.x=a.clientX-a.currentTarget.offsets[0]+a.currentTarget.scrolls[0],c.y=a.clientY-a.currentTarget.offsets[1]+a.currentTarget.scrolls[1],b=this.map.getLonLatFromPixel(new Tmap.Pixel(c.x,c.y))}catch(d){c.x=a.clientX-this._this.view_divLeft(this.map.div)+document.documentElement.scrollLeft,c.y=a.clientY-this._this.view_divTop(this.map.div)+document.documentElement.scrollTop,b=this.map.getLonLatFromPixel(new Tmap.Pixel(c.x,c.y))}this._this.addSpacePoint(b),a.stopPropagation&&a.stopPropagation(),a.cancelBubble=!0}},addSpacePoint:function(a){var b=new Tmap.Geometry.Point(a.lon,a.lat),c=new Tmap.Feature.Vector(b);this.LPoint.addFeatures(c),this.PArr.push(b),this.drawLine(),this.drawPopup()},getPopupForDistance:function(a,b){var c="";return b?(c="<div class='tmDistancePopStyle tmDistancePopLast'>",c+="<span>\ucd1d \uac70\ub9ac</span> "+this.getConvertFixedNumber(a)+"<br/>",c+="<span>\ub3c4\ubcf4</span> "+this.getTimeForWalk(a)+"<br/>",c+="<span>\uc790\uc804\uac70</span> "+this.getTimeForBicycle(a)+"<br/>",c+="<div class='tmDistancePopDesc'>",c+="<hr>",c+="\ub9c8\uc6b0\uc2a4 \uc624\ub978\ucabd \ubc84\ud2bc\uc744 \ub204\ub974\uba74 \uac70\ub9ac\uc7ac\uae30 \ubaa8\ub4dc\uac00 \uc644\ub8cc \ub429\ub2c8\ub2e4.",c+="</div></div>"):c=a>1e3?"<div class=tmDistancePop>"+(a/1e3).toFixed(2)+"km</div>":"<div class=tmDistancePop>"+a.toFixed(1)+"m</div>",c},getPopupForArea:function(a){var b="";return b="<div class='tmDistancePopStyle tmDistancePopLastBlue'>",b+="<span>\ucd1d \uba74\uc801</span> "+this.getConvertFixedNumber(a,"sqrt")+"<br/>",b+="<div class='tmDistancePopDesc'>",b+="<hr>",b+="\ub9c8\uc6b0\uc2a4 \uc624\ub978\ucabd \ubc84\ud2bc\uc744 \ub204\ub974\uba74 \uba74\uc801\uc7ac\uae30 \ubaa8\ub4dc\uac00 \uc644\ub8cc \ub429\ub2c8\ub2e4.",b+="</div></div>"},drawPopup:function(){var a=this.PArr.length,b={};b.arr=[],b.val=0;var c,d;switch(this.LType){case 1:for(c=0;a>c;c++){if(this.PPop[c]&&this.map.removePopup(this.PPop[c]),0==c)b.valM="<div class='tmDistancePopStyle tmDistancePopStart'>\uc2dc\uc791\uc810</div>",this.PPop[c]=new Tmap.Popup("dist"+c,new Tmap.LonLat(this.PArr[c].x,this.PArr[c].y),new Tmap.Size(70,16),b.valM);else{var e=new Tmap.LonLat(this.PArr[c-1].x,this.PArr[c-1].y).transform(this.mercator,this.katech),f=new Tmap.LonLat(this.PArr[c].x,this.PArr[c].y).transform(this.mercator,this.katech),g=e.lon-f.lon,h=e.lat-f.lat,i=Math.sqrt(Math.pow(g,2)+Math.pow(h,2));b.arr[c]=i,b.val+=i,c==a-1?(d=c,b.valM=this.getPopupForDistance(b.val,!0),this.PPop[c]=new Tmap.Popup("dist"+c,new Tmap.LonLat(this.PArr[c].x,this.PArr[c].y),new Tmap.Size(150,200),b.valM)):(b.valM=this.getPopupForDistance(b.val),this.PPop[c]=new Tmap.Popup("dist"+c,new Tmap.LonLat(this.PArr[c].x,this.PArr[c].y),new Tmap.Size(70,16),b.valM))}this.PPop[c].setBackgroundColor("transparent"),this.map.addPopup(this.PPop[c]),this.PPop[c].contentDiv.style.overflow="hidden",d==c?(this.PPop[d].contentDiv.style.width="150px",this.PPop[d].div.style.width="160px"):(this.PPop[c].contentDiv.style.width="70px",this.PPop[c].div.style.width="80px",this.PPop[c].div.style.height="27px")}break;case 2:if(3>a)return;for(c=0;a>c;c++)if(this.PPop[c]&&this.map.removePopup(this.PPop[c]),c>0){var e=new Tmap.LonLat(this.PArr[c-1].x,this.PArr[c-1].y).transform(this.mercator,this.katech),f=new Tmap.LonLat(this.PArr[c].x,this.PArr[c].y).transform(this.mercator,this.katech),g=e.lon-f.lon,h=e.lat-f.lat,i=Math.sqrt(Math.pow(g,2)+Math.pow(h,2));b.val+=i}var j=a-1;d=j,b.valM=this.getPopupForArea(Math.abs(this.LLine.features[0].geometry.getGeodesicArea(this.mercator))),this.PPop[j]=new Tmap.Popup("area",new Tmap.LonLat(this.PArr[j].x,this.PArr[j].y),new Tmap.Size(150,200),b.valM),this.PPop[j].setBackgroundColor("transparent"),this.map.addPopup(this.PPop[j]),this.PPop[j].contentDiv.style.overflow="hidden",d==j?(this.PPop[d].contentDiv.style.width="150px",this.PPop[d].div.style.width="160px"):(this.PPop[j].contentDiv.style.width="70px",this.PPop[j].div.style.width="80px",this.PPop[j].div.style.height="27px")}},getConvertFixedNumber:function(a,b){return"sqrt"==b?a>1e3?(a/1e3).toFixed(2)+"\u33a2":a.toFixed(1)+"\u33a1":a>1e3?(a/1e3).toFixed(2)+"km":a.toFixed(1)+"m"},getCamel:function(a){var b=a.split("");return b[0]=b[0].toUpperCase(),b.join("")},getTimeForWalk:function(a){return(a/4e3*60).toFixed(1)+"\ubd84"},getTimeForBicycle:function(a){return(a/15e3*60).toFixed(1)+"\ubd84"},drawLine:function(){this.LLine.removeAllFeatures();var a,b;switch(this.LType){case 1:b=new Tmap.Geometry.LineString(this.PArr),a=new Tmap.Feature.Vector(b);break;case 2:b=new Tmap.Geometry.LinearRing(this.PArr),a=new Tmap.Feature.Vector(b)}this.LLine.addFeatures(a)},view_divTop:function(a){return a.offsetParent==document.body?a.offsetTop:a.offsetTop+view_divTop(a.offsetParent)},view_divLeft:function(a){return a.offsetParent==document.body?a.offsetLeft:a.offsetLeft+view_divLeft(a.offsetParent)},leftTop:function(){this.map.div},afterRemoveControl:function(){this.deactivate(),this.map=null},CLASS_NAME:"Tmap.Control.Space"}),Tmap.Control.ZoomBar=Tmap.Class(Tmap.Control.PanZoom,{slider:null,sliderEvents:null,zoombarDiv:null,zoomWorldIcon:!1,forceFixedZoomLevel:!1,mouseDragStart:null,deltaY:null,zoomStart:null,zoomStopWidth:30,zoomStopHeight:10,btnEvents:null,btnLocation:{start:0,end:0},zoomBarEvents:null,tween:null,tweenDr:10,levelGuide:null,destroy:function(){this._removeZoomBar(),this.map.events.un({changebaselayer:this.redraw,scope:this}),Tmap.Control.PanZoom.prototype.destroy.apply(this,arguments),delete this.mouseDragStart,delete this.zoomStart},setMap:function(a){Tmap.Control.PanZoom.prototype.setMap.apply(this,arguments),this.map.events.register("changebaselayer",this,this.redraw)},redraw:function(){null!=this.div&&(this.removeButtons(),this._removeZoomBar()),this.draw()},draw:function(a){Tmap.Control.prototype.draw.apply(this,arguments),a=this.position.clone(),this.buttons=[];var b={w:30,h:29},c=new Tmap.Pixel(a.x+b.w/2,a.y);return this._addButton("zoomin","zoom-plus-mini.png",a,b),c=this._addZoomBar(a.add(0,b.h)),this.btnLocation.start=a.y+b.h,this._addButton("zoomout","zoom-minus-mini.png",new Tmap.Pixel(a.x,a.y+b.h),b),this.tween=new Tmap.Tween(Tmap.Easing.Quad.easeOut),window.tmUniqZoombarThis=this,this.div},btnOver:function(a){this.timeoutId&&clearTimeout(this.timeoutId),this._showZoomBar()},timeoutId:0,btnOut:function(a){this.timeoutId&&clearTimeout(this.timeoutId),this.timeoutId=setTimeout(function(){tmUniqZoombarThis._hideZoomBar.apply(tmUniqZoombarThis)},500)},zoomBarOver:function(a){this.timeoutId&&clearTimeout(this.timeoutId),this._showZoomBar(),this.levelGuide.style.visibility="visible"},zoomBarOut:function(a){this.timeoutId&&clearTimeout(this.timeoutId),this.timeoutId=setTimeout(function(){tmUniqZoombarThis._hideZoomBar.apply(tmUniqZoombarThis)},500),this.levelGuide.style.visibility="hidden"},sliderOver:function(a){this.timeoutId&&clearTimeout(this.timeoutId),this._showZoomBar(),this.levelGuide.style.visibility="visible"},sliderOut:function(a){this.timeoutId&&clearTimeout(this.timeoutId),this.timeoutId=setTimeout(function(){tmUniqZoombarThis._hideZoomBar.apply(tmUniqZoombarThis)},500),this.levelGuide.style.visibility="hidden"},_hideZoomBar:function(){if(this.buttons[1])var a=parseInt(this.buttons[1].style.top.split("px")[0]);else var a=this.btnLocation.end;this.tween.playing&&this.tween.stop(),this.tween.start({y:a},{y:this.btnLocation.start},this.tweenDr,{callbacks:{eachStep:Tmap.Function.bind(function(a){this.buttons[1].style.top=parseInt(a.y)+"px",a.y-this.btnLocation.start>30&&(this.zoombarDiv.style.visibility="hidden",this.slider.style.visibility="hidden")},this),done:Tmap.Function.bind(function(a){this.buttons[1].style.top=parseInt(a.y)+"px",this.zoombarDiv.style.visibility="hidden",this.slider.style.visibility="hidden"},this)}})},_showZoomBar:function(){if(this.buttons[1])var a=parseInt(this.buttons[1].style.top.split("px")[0]);else var a=this.btnLocation.start;this.tween.playing&&this.tween.stop(),this.tween.start({y:a},{y:this.btnLocation.end},this.tweenDr,{callbacks:{eachStep:Tmap.Function.bind(function(a){this.buttons[1].style.top=parseInt(a.y)+"px",this.btnLocation.end-a.y<30&&(this.zoombarDiv.style.visibility="visible",this.slider.style.visibility="visible")},this),done:Tmap.Function.bind(function(a){this.buttons[1].style.top=parseInt(a.y)+"px",this.zoombarDiv.style.visibility="visible",this.slider.style.visibility="visible"},this)}})},_addButton:function(a,b,c,d){var e=this.getImageLocation(b),f=Tmap.Util.createAlphaImageDiv(this.id+"_"+a,c,d,e,"absolute");return f.style.cursor="pointer",this.btnEvents=new Tmap.Events(this,f),this.btnEvents.on({mouseover:this.btnOver,mouseout:this.btnOut}),this.div.appendChild(f),f.action=a,f.className="tmButton",this.buttons.push(f),f},getImageLocation:function(a){var b=Tmap.Util.getImageLocation("zm_"+a);return b},_addZoomBar:function(a){var b=this.getImageLocation("slider.png"),c=this.id+"_"+this.map.id,d=this.map.getNumZoomLevels()-1-this.map.getZoom(),e=Tmap.Util.createAlphaImageDiv(c,a.add(4,d*this.zoomStopHeight),{w:22,h:9},b,"absolute");e.style.cursor="move",this.slider=e,this.sliderEvents=new Tmap.Events(this,e,null,!0,{includeXY:!0}),this.sliderEvents.on({touchstart:this.zoomBarDown,touchmove:this.zoomBarDrag,touchend:this.zoomBarUp,mousedown:this.zoomBarDown,mousemove:this.zoomBarDrag,mouseup:this.zoomBarUp,mouseover:this.sliderOver,mouseout:this.sliderOut});var f={w:this.zoomStopWidth,h:this.zoomStopHeight*this.map.getNumZoomLevels()},b=this.getImageLocation("zoombar.png"),g=null,h=a.add(0,0);if(Tmap.Util.alphaHack()){var c=this.id+"_"+this.map.id;g=Tmap.Util.createAlphaImageDiv(c,h,{w:f.w,h:this.zoomStopHeight},b,"absolute",null,"crop"),g.style.height=f.h+"px"}else g=Tmap.Util.createDiv("Tmap_Control_PanZoomBar_Zoombar"+this.map.id,h,f,b);g.style.cursor="pointer",g.className="tmButton",this.zoombarDiv=g,this.div.appendChild(g),this.zoomBarEvents=new Tmap.Events(this,g),this.zoomBarEvents.on({mouseover:this.zoomBarOver,mouseout:this.zoomBarOut}),this.startTop=parseInt(g.style.top),this.div.appendChild(e);var i=this.getImageLocation("btn_lable.png"),j=Tmap.Util.createDiv("Tmap_Control_PanZoomBar_LevelGuide"+this.map.id,h.add(f.w,30),{w:29,h:134},i);return this.levelGuide=j,this.div.appendChild(j),this.map.events.register("zoomend",this,this.moveZoomBar),a=a.add(0,this.zoomStopHeight*this.map.getNumZoomLevels()),this.btnLocation.end=h.y+f.h,j.style.visibility="hidden",g.style.visibility="hidden",e.style.visibility="hidden",a},_removeZoomBar:function(){this.sliderEvents&&(this.sliderEvents.un({touchstart:this.zoomBarDown,touchmove:this.zoomBarDrag,touchend:this.zoomBarUp,mousedown:this.zoomBarDown,mousemove:this.zoomBarDrag,mouseup:this.zoomBarUp,mouseover:this.sliderOver,mouseout:this.sliderOut}),this.sliderEvents.destroy()),this.zoomBarEvents.on({mouseover:this.zoomBarOver,mouseout:this.zoomBarOut}),this.zoomBarEvents.destroy(),this.btnEvents.on({mouseover:this.btnOver,mouseout:this.btnOut}),this.btnEvents.destroy(),this.tween=null,this.div.removeChild(this.zoombarDiv),this.zoombarDiv=null,this.div.removeChild(this.slider),this.div.removeChild(this.levelGuide),this.slider=null,this.map.events.unregister("zoomend",this,this.moveZoomBar)},onButtonClick:function(a){if(Tmap.Control.PanZoom.prototype.onButtonClick.apply(this,arguments),a.buttonElement===this.zoombarDiv){var b=a.buttonXY.y/this.zoomStopHeight;(this.forceFixedZoomLevel||!this.map.fractionalZoom)&&(b=Math.floor(b));var c=this.map.getNumZoomLevels()-1-b;c=Math.min(Math.max(c,0),this.map.getNumZoomLevels()-1),this.map.zoomTo(c)}},passEventToSlider:function(a){this.sliderEvents.handleBrowserEvent(a)},zoomBarDown:function(a){(Tmap.Event.isLeftClick(a)||Tmap.Event.isSingleTouch(a))&&(this.map.events.on({touchmove:this.passEventToSlider,mousemove:this.passEventToSlider,mouseup:this.passEventToSlider,scope:this}),this.mouseDragStart=a.xy.clone(),this.zoomStart=a.xy.clone(),this.div.style.cursor="move",this.zoombarDiv.offsets=null,Tmap.Event.stop(a,!1,!0))},zoomBarDrag:function(a){if(null!=this.mouseDragStart){var b=this.mouseDragStart.y-a.xy.y,c=Tmap.Util.pagePosition(this.zoombarDiv);if(a.clientY-c[1]>0&&a.clientY-c[1]<parseInt(this.zoombarDiv.style.height)-2){var d=parseInt(this.slider.style.top)-b;this.slider.style.top=d+"px",this.mouseDragStart=a.xy.clone()}this.deltaY=this.zoomStart.y-a.xy.y,Tmap.Event.stop(a,!1,!0)}},zoomBarUp:function(a){if((Tmap.Event.isLeftClick(a)||"touchend"===a.type)&&this.mouseDragStart){this.div.style.cursor="",this.map.events.un({touchmove:this.passEventToSlider,mouseup:this.passEventToSlider,mousemove:this.passEventToSlider,scope:this});var b=this.map.zoom;!this.forceFixedZoomLevel&&this.map.fractionalZoom?(b+=this.deltaY/this.zoomStopHeight,b=Math.min(Math.max(b,0),this.map.getNumZoomLevels()-1)):(b+=this.deltaY/this.zoomStopHeight,b=Math.max(Math.round(b),0)),this.map.zoomTo(b),this.mouseDragStart=null,this.zoomStart=null,this.deltaY=0,Tmap.Event.stop(a,!1,!0)}},moveZoomBar:function(){var a=(this.map.getNumZoomLevels()-1-this.map.getZoom())*this.zoomStopHeight+this.startTop+-2;this.slider.style.top=a+"px"},CLASS_NAME:"Tmap.Control.ZoomBar"}),Tmap.Marker.prototype.isTransform=!1,Tmap.Layer.Markers.prototype.addMarker=function(a){var b=this.projection,c=this.map.projection;b.toString()!=c.toString()&&(a.isTransform||(a.lonlat.transform(b,c),a.isTransform=!0)),this.markers.push(a),this.opacity<1&&a.setOpacity(this.opacity),this.map&&this.map.getExtent()&&(a.map=this.map,this.drawMarker(a))},Tmap.Layer.Markers.prototype.removeMarker=function(a){this.markers&&this.markers.length&&(a.popup&&this.map.removePopup(a.popup),Tmap.Event.stopObservingElement(a.icon.imageDiv),Tmap.Util.removeItem(this.markers,a),a.erase())},Tmap.Map.prototype.addLayer=function(a){if("Tmap.Theme.Bicycle"!=a.CLASS_NAME&&"Tmap.Legend"!=a.CLASS_NAME&&"Tmap.Theme.Traffic"!=a.CLASS_NAME){for(var b=0,c=this.layers.length;c>b;b++)if(this.layers[b]==a)return!1;return this.events.triggerEvent("preaddlayer",{layer:a})===!1?!1:(this.allOverlays&&(a.isBaseLayer=!1),a.div.className="tmLayerDiv",a.div.style.overflow="",this.setLayerZIndex(a,this.layers.length),a.isFixed?this.viewPortDiv.appendChild(a.div):this.layerContainerDiv.appendChild(a.div),this.layers.push(a),a.setMap(this),a.isBaseLayer||this.allOverlays&&!this.baseLayer?null==this.baseLayer?this.setBaseLayer(a):a.setVisibility(!1):a.redraw(),this.events.triggerEvent("addlayer",{layer:a}),a.events.triggerEvent("added",{map:this,layer:a}),a.afterAdd(),!0)}a.setMap(this)},Tmap.Popup.prototype.isTransform=!1,Tmap.Map.prototype.addPopup=function(a,b){if(b)for(var c=this.popups.length-1;c>=0;--c)this.removePopup(this.popups[c]);if(a.map=this,a.projection){var d=a.projection,e=this.projection;d.toString()!=e.toString()&&(a.isTransform||(a.lonlat.transform(d,e),a.isTransform=!0))}this.popups.push(a);var f=a.draw();f&&(f.style.zIndex=this.Z_INDEX_BASE.Popup+this.popups.length,this.layerContainerDiv.appendChild(f))},Tmap.Map.prototype.removeAllPopup=function(){for(var a=this.popups.length-1;a>=0;--a)this.removePopup(this.popups[a])},Tmap.theMap.prototype.minZoom=0,Tmap.theMap.prototype.maxZoom=19,Tmap.theMap.prototype.isValidZoomLevel=function(a){return null!=a&&a>=this.minZoom&&a<=this.maxZoom},Tmap.theMap.prototype.getZoomLevelFormLimit=function(a){return a<this.minZoom?a=this.minZoom:a>this.maxZoom&&(a=this.maxZoom),a},Tmap.theMap.prototype.getZoomForResolution=function(a,b){var c=null;return null!=this.baseLayer&&(c=this.baseLayer.getZoomForResolution(a,b)),c=this.getZoomLevelFormLimit(c)},Tmap.theMap.prototype.getZoomForExtent=function(a,b){var c=null;return null!=this.baseLayer&&(c=this.baseLayer.getZoomForExtent(a,b)),c=this.getZoomLevelFormLimit(c)},Tmap.theMap.prototype.zoomIn=function(){if(this.isValidZoomLevel(this.getZoom()+1)){var a=arguments;if(a.length>0)if("Tmap.Pixel"==a[0].CLASS_NAME){var b=this.getLonLatFromPixel(a[0]),c=this.getSize(),d=c.w/2-a[0].x,e=a[0].y-c.h/2,f=this.baseLayer.getResolutionForZoom(this.getZoom()+1),g=new Tmap.LonLat(b.lon+d*f,b.lat+e*f);this.currentXY=a[0].clone(),this.setCenter(g,this.getZoom()+1)}else if("Tmap.LonLat"==a[0].CLASS_NAME){var h=this.getExtent();if(1!=h.containsLonLat(a[0]))return void alert("zoomIn : \uc785\ub825\ud558\uc2e0 \uc88c\ud45c\uac00 \ud604\uc7ac \ud654\uba74 \ubc94\uc704\ub97c \ubc97\uc5b4\ub0ac\uc2b5\ub2c8\ub2e4.");var i=this.getPixelFromLonLat(a[0]),c=this.getSize(),d=c.w/2-i.x,e=i.y-c.h/2,f=this.baseLayer.getResolutionForZoom(this.getZoom()+1),g=new Tmap.LonLat(a[0].lon+d*f,a[0].lat+e*f);this.currentXY=i.clone(),this.setCenter(g,this.getZoom()+1)}else this.zoomTo(this.getZoom()+1);else this.zoomTo(this.getZoom()+1)}},Tmap.theMap.prototype.zoomOut=function(){if(this.isValidZoomLevel(this.getZoom()-1)){var a=arguments;if(a.length>0)if("Tmap.Pixel"==a[0].CLASS_NAME){var b=this.getLonLatFromPixel(a[0]),c=this.getSize(),d=c.w/2-a[0].x,e=a[0].y-c.h/2,f=this.baseLayer.getResolutionForZoom(this.getZoom()-1),g=new Tmap.LonLat(b.lon+d*f,b.lat+e*f);this.currentXY=a[0].clone(),this.setCenter(g,this.getZoom()-1)}else if("Tmap.LonLat"==a[0].CLASS_NAME){var h=this.getExtent();if(1!=h.containsLonLat(a[0]))return void alert("zoomOut : \uc785\ub825\ud558\uc2e0 \uc88c\ud45c\uac00 \ud604\uc7ac \ud654\uba74 \ubc94\uc704\ub97c \ubc97\uc5b4\ub0ac\uc2b5\ub2c8\ub2e4.");var i=this.getPixelFromLonLat(a[0]),c=this.getSize(),d=c.w/2-i.x,e=i.y-c.h/2,f=this.baseLayer.getResolutionForZoom(this.getZoom()-1),g=new Tmap.LonLat(a[0].lon+d*f,a[0].lat+e*f);this.currentXY=i.clone(),this.setCenter(g,this.getZoom()-1)}else this.zoomTo(this.getZoom()-1);else this.zoomTo(this.getZoom()-1)}},Tmap.IconHtml.prototype.updateSize=function(){var a=this.imageDiv.innerHTML,b=(this.map?this.map.div:document.body,Tmap.Util.getRenderedDimensions(a,null));this.size=b};var TmapCP=window.CanvasRenderingContext2D&&CanvasRenderingContext2D.prototype;TmapCP&&TmapCP.lineTo&&(TmapCP.dashedLine=function(a,b,c,d,e){e||(e=[10,5]);var f=e.length,g=c-a,h=d-b,i=Math.abs(g)>Math.abs(h),j=i?h/g:g/h;this.moveTo(a,b);for(var k=Math.sqrt(g*g+h*h),l=0;k>=.1;){var m=Math.min(k,e[l%f]),n=Math.sqrt(m*m/(1+j*j));i?(0>g&&(n=-n),a+=n,b+=j*n):(0>h&&(n=-n),a+=j*n,b+=n),this[l%2==0?"lineTo":"moveTo"](a,b),k-=m,l++}}),Tmap.Renderer.Canvas.prototype.setCanvasStyle=function(a,b){if("fill"===a)this.canvas.globalAlpha=b.fillOpacity,this.canvas.fillStyle=b.fillColor;else if("stroke"===a){var c=1;this.canvas.globalAlpha=b.strokeOpacity,this.canvas.strokeStyle=b.strokeColor,this.canvas.lineWidth=b.strokeWidth,this.canvas.lineCap=b.strokeLinecap,this.canvas.dashArray=this.dashStyle(b,c)}else this.canvas.globalAlpha=0,this.canvas.lineWidth=1},Tmap.Renderer.Canvas.prototype.renderPath=function(a,b,c,d,e){var f=b.components,g=f.length;a.beginPath();var h=this.getLocalXY(f[0]),i=h[0],j=h[1];if(!isNaN(i)&&!isNaN(j)){if(a.moveTo(h[0],h[1]),"none"!=a.dashArray&&null!=a.dashArray&&"fill"!=e)for(var k=0;g-1>k;++k){var l=this.getLocalXY(f[k]),m=this.getLocalXY(f[k+1]);a.dashedLine(l[0],l[1],m[0],m[1],a.dashArray)}else for(var k=1;g>k;++k){var l=this.getLocalXY(f[k]);a.lineTo(l[0],l[1])}"fill"===e?a.fill():a.stroke()}},Tmap.IconHtml=Tmap.Class(Tmap.Icon,{htmlURL:"",autoSize:!1,initialize:function(){htmlURL=arguments[0],this.autoSize=arguments[4],htmlURL=htmlURL.replace(/^\s+/,""),"<"!=htmlURL.substring(0,1)&&(htmlURL="<div>"+htmlURL+"</div>");for(var a=[""],b=1;b<arguments.length;b++)a.push(arguments[b]);Tmap.Icon.prototype.initialize.apply(this,a),
this.imageDiv.innerHTML=htmlURL,1==this.autoSize&&this.updateSize()}}),Tmap.IconHtml.prototype.updateSize=function(){var a=this.imageDiv.innerHTML,b=(this.map?this.map.div:document.body,Tmap.Util.getRenderedDimensions(a,null));this.size=b,this.calculateOffset&&(this.offset=this.calculateOffset(this.size))},Tmap.Renderer.Canvas.prototype.setCanvasStyle=function(a,b){if("fill"===a)this.canvas.globalAlpha=b.fillOpacity,this.canvas.fillStyle=b.fillColor;else if("stroke"===a){var c=1;this.canvas.globalAlpha=b.strokeOpacity,this.canvas.strokeStyle=b.strokeColor,this.canvas.lineWidth=b.strokeWidth,this.canvas.lineCap=b.strokeLinecap,this.canvas.lineJoin=b.strokeLinejoin,this.canvas.dashArray=this.dashStyle(b,c)}else this.canvas.globalAlpha=0,this.canvas.lineWidth=1},Tmap.Util.GetMeterFromProjection=function(a,b){var c,d=new Tmap.LonLat(0,0),e=new Tmap.LonLat(a,0),f=new Tmap.Projection("KATECH");return c=b?b:Tmap.Map.prototype.projection,d.transform(f,c),e.transform(f,c),e=e.add(-1*d.lon,-1*d.lat),Math.sqrt(Math.pow(e.lon,2)+Math.pow(e.lat,2))},Tmap.Util.getParameterFromURL=function(a){for(var b=document.getElementsByTagName("script"),c="",d=0;d<b.length;d++){var e=b[d].src.split(a+"=")[1];if(e&&e.length>1){var f=e.split("&");if(!e)continue;c=f.length>1?f[0]:e;break}}return c},Tmap.Renderer.Canvas.prototype.dashStyle=function(a,b){var c=a.strokeWidth*b,d=a.strokeDashstyle;if(!d)return"none";switch(d){case"solid":return"none";case"dot":return[1,4*c];case"dash":return[4*c,4*c];case"dashdot":return[4*c,4*c,1,4*c];case"longdash":return[8*c,4*c];case"longdashdot":return[8*c,4*c,1,4*c];default:return d=Tmap.String.trim(d).replace(/\s+/g,","),d.split(",")}},Tmap.Control.Navigation.prototype.wheelChange=function(a,b){this.map.fractionalZoom||(b=Math.round(b));var c=this.map.getZoom(),d=c+b;d=Math.max(d,this.map.minZoom),d=Math.min(d,this.map.maxZoom),d!==c&&d!==c&&this.map.zoomTo(d,a.xy)},Tmap.Control.KeyboardDefaults.prototype.defaultKeyPress=function(a){var b,c=!0;switch(a.keyCode){case Tmap.Event.KEY_LEFT:this.map.pan(-this.slideFactor,0);break;case Tmap.Event.KEY_RIGHT:this.map.pan(this.slideFactor,0);break;case Tmap.Event.KEY_UP:this.map.pan(0,-this.slideFactor);break;case Tmap.Event.KEY_DOWN:this.map.pan(0,this.slideFactor);break;case 33:b=this.map.getSize(),this.map.pan(0,-.75*b.h);break;case 34:b=this.map.getSize(),this.map.pan(0,.75*b.h);break;case 35:b=this.map.getSize(),this.map.pan(.75*b.w,0);break;case 36:b=this.map.getSize(),this.map.pan(-.75*b.w,0);break;case 43:case 61:case 187:case 107:this.map.zoomIn();break;case 45:case 109:case 173:case 189:case 95:this.map.zoomOut();break;default:c=!1}c&&Tmap.Event.stop(a)},Tmap.Layer.Grid.prototype.moveByPx=function(a,b){this.singleTile||0!=this.branch||this.moveGriddedTiles()},Tmap.Layer.TMS.prototype.getURL=function(a){a=this.adjustBounds(a);var b=this.getServerResolution(),c=Math.round((a.left-this.tileOrigin.lon)/(b*this.tileSize.w)),d=Math.round((a.bottom-this.tileOrigin.lat)/(b*this.tileSize.h)),e=this.getServerZoom(),f=this.serviceVersion+"/"+this.layername+"/"+e+"/"+c+"/"+d+"."+this.type,g=this.url;return Tmap.Util.isArray(g)&&(g=this.selectUrl(f,g)),g+f+this.map.TMSParam},navigator.userAgent.indexOf("Chrome")>0&&(Tmap.Map.prototype.bufferSize=0),Tmap.Geometry.Circle=function(a,b,c,d){if(d&&"m"==d.unit){var e=new Tmap.LonLat(a,b).transform("EPSG:3857","KATECH").add(c,0).transform("KATECH","EPSG:3857");c=Math.sqrt(Math.pow(e.lon-a,2)+Math.pow(e.lat-b,2))}var f=50;return c>500&&(f=Math.floor(c/10)),Tmap.Geometry.Polygon.createRegularPolygon(new Tmap.Geometry.Point(a,b),c,f)},Tmap.Marker.prototype.moveTo=function(a){"Tmap.Pixel"==a.CLASS_NAME?(null!=a&&null!=this.icon&&this.icon.moveTo(a),this.lonlat=this.map.getLonLatFromLayerPx(a)):"Tmap.LonLat"==a.CLASS_NAME&&(null!=a&&null!=this.icon&&this.icon.moveTo(this.map.getLayerPxFromLonLat(a)),this.lonlat=a)},Tmap.Control.prototype.setResizeToAlign=function(){!this.onMapResize.toString().length>13||(this.onMapResize=function(){this.setAlignHParam&&this.setAlignH(this.setAlignHParam),this.setAlignVParam&&this.setAlignV(this.setAlignVParam)})},Tmap.Control.prototype.setAlignH=function(a){switch(this.setAlignHParam=a,this.setResizeToAlign(),a){case"left":this.div.style.right="auto",this.div.style.left="0px";break;case"right":this.div.style.left="auto",this.div.style.right="10px";break;case"center":this.div.style.right="auto",this.div.style.left=(this.map.size.w-this.div.clientWidth)/2+"px";break;default:this.div.style.right="auto",-1==String(a).indexOf("px")?this.div.style.left=parseInt(a)+"px":this.div.style.left=a}},Tmap.Control.prototype.setAlignV=function(a){switch(this.setAlignVParam=a,this.setResizeToAlign(),a){case"top":this.div.style.bottom="auto",this.div.style.top="0px";break;case"bottom":this.div.style.top="auto",this.div.style.bottom="2px";break;case"center":this.div.style.bottom="auto",this.div.style.top=(this.map.size.h-this.div.clientHeight)/2+"px";break;default:this.div.style.bottom="auto",-1==String(a).indexOf("px")?this.div.style.top=parseInt(a)+"px":this.div.style.top=a}},Tmap.Events.buttonclick.prototype.buttonClick=function(a){var b=!0,c=Tmap.Event.element(a);if(c&&(Tmap.Event.isLeftClick(a)||!~a.type.indexOf("mouse"))){var d=this.getPressedButton(c);if(d){if("keydown"===a.type)switch(a.keyCode){case Tmap.Event.KEY_RETURN:case Tmap.Event.KEY_SPACE:this.target.triggerEvent("buttonclick",{buttonElement:d}),Tmap.Event.stop(a),b=!1}else if(this.startEvt){if(this.completeRegEx.test(a.type)){var e=Tmap.Util.pagePosition(d),f=Tmap.Util.getViewportElement(),g=window.pageYOffset||f.scrollTop,h=window.pageXOffset||f.scrollLeft;e[0]=e[0]-h,e[1]=e[1]-g,this.target.triggerEvent("buttonclick",{buttonElement:d,buttonXY:{x:this.startEvt.clientX-e[0],y:this.startEvt.clientY-e[1]}})}if(this.cancelRegEx.test(a.type)){var i=Math.abs(a.clientX-this.startEvt.clientX),j=Math.abs(a.clientY-this.startEvt.clientY);Math.sqrt(Math.pow(i,2)+Math.pow(j,2))>20&&delete this.startEvt}Tmap.Event.stop(a),b=!1}this.startRegEx.test(a.type)&&(this.startEvt=a,Tmap.Event.stop(a),b=!1)}else b=!this.ignore(Tmap.Event.element(a)),delete this.startEvt}return b},Tmap.theMap.prototype.removeControl=function(a){a&&a==this.getControl(a.id)&&(a.div&&a.div.parentNode==this.viewPortDiv&&this.viewPortDiv.removeChild(a.div),Tmap.Util.removeItem(this.controls,a),a.afterRemoveControl&&a.afterRemoveControl())},Tmap.Bounds.prototype.isEmpty=function(){return!(null!=this.left&&null!=this.bottom&&null!=this.right&&null!=this.top)},Tmap.Format.KML.prototype.parseData=function(a,b){"string"==typeof a&&(a=Tmap.Format.XML.prototype.read.apply(this,[a]));for(var c=["Link","NetworkLink","Style","StyleMap","Placemark","totalDistance","totalTime"],d=0,e=c.length;e>d;++d){var f,g=c[d],h=this.getElementsByTagNameNS(a,"*",g);if(0!=h.length)switch(g.toLowerCase()){case"link":case"networklink":this.parseLinks(h,b);break;case"style":this.extractStyles&&this.parseStyles(h,b);break;case"stylemap":this.extractStyles&&this.parseStyleMaps(h,b);break;case"placemark":this.parseFeatures(h,b);break;case"totaldistance":for(f=0;f<this.features.length;f++)this.features[f].attributes.totalDistance=h[0].textContent,this.features[f].data.totalDistance=h[0].textContent;break;case"totaltime":for(f=0;f<this.features.length;f++)this.features[f].attributes.totalTime=h[0].textContent,this.features[f].data.totalTime=h[0].textContent}}return this.features},Tmap.Control.ReverseLabel=Tmap.Class(Tmap.Control,{poiLon:null,poiLat:null,labelName:"",id:null,buildingName:"",floorName:"",reverseLabelPopup:null,popupFlag:!0,labelUrl:"/geo/reverseLabel",initialize:function(a){this.displayClass=this.CLASS_NAME.replace("Tmap.","tm").replace(/\./g,""),Tmap.Util.extend(this,a),this.events=new Tmap.Events(this),this.eventListeners instanceof Object&&this.events.on(this.eventListeners),null==this.id&&(this.id=Tmap.Util.createUniqueID(this.CLASS_NAME+"_"))},draw:function(){return!1},activate:function(){this.popupFlag=!0},deactivate:function(){this.popupFlag=!1},removePopup:function(){this.reverseLabelPopup&&this.map.removePopup(this.reverseLabelPopup)},destroyPopup:function(){this.reverseLabelPopup&&this.reverseLabelPopup.destroy()},destroy:function(){this.destroyPopup(),this.poiLon=null,this.poiLat=null,this.labelName=null,this.id=null,this.buildingName=null,this.floorName=null,this.reverseLabelPopup=null,Tmap.Control.prototype.destroy.apply(this)},startLoadFromEvent:function(a){var b=this.getLonLatFromEvent(a),c=this.map.getZoom(),d=this.map.indoor.floorId,e=this.map.indoor.bldId,f=b.lonlat.lon,g=b.lonlat.lat;this.callLabelData(f,g,c,d,e,!0)},addSimplePopupFromEvent:function(a){if(this.reverseLabelPopup&&this.map.removePopup(this.reverseLabelPopup),this.popupFlag&&this.map.baseLayer==this.map.iLayer){var b=this.getLonLatFromEvent(a),c=this.map.getZoom(),d=this.map.indoor.floorId,e=this.map.indoor.bldId,f=b.lonlat.lon,g=b.lonlat.lat;this.callLabelData(f,g,c,d,e)}},getLonLatFromEvent:function(a){var b,c,d;try{b=a.clientX-a.currentTarget.offsets[0]+a.currentTarget.scrolls[0],c=a.clientY-a.currentTarget.offsets[1]+a.currentTarget.scrolls[1],d=this.map.getLonLatFromPixel(new Tmap.Pixel(b,c))}catch(e){b=a.clientX-Tmap.Control.Space.prototype.view_divLeft(this.div)+document.documentElement.scrollLeft,c=a.clientY-Tmap.Control.Space.prototype.view_divTop(this.div)+document.documentElement.scrollTop,d=this.map.getLonLatFromPixel(new Tmap.Pixel(b,c))}return{x:b,y:c,lonlat:d}},callLabelData:function(a,b,c,d,e,f){var g=this.labelUrl,h=new Tmap.TData;h.callScope=this,h.dataOnly=f;var i={appKey:Tmap.Util.getParameterFromURL("appKey"),format:"xml",reqCoordType:"EPSG3857",searchType:"IK",centerLon:a,centerLat:b,reqLevel:c,bldId:e,floorId:d};h.getCustomAPI(g,i),h.events.register("onComplete",h,function(){var a=new Tmap.Format.ReverseLabel;a.read(this.responseXML),this.callScope.setReverseData(a.nodeValues),this.dataOnly?this.callScope.callbackData():this.callScope.addReversePopup(a.nodeValues)})},callbackData:function(){var a={id:this.id,name:this.labelName,poiLon:this.poiLon,poiLat:this.poiLat,buildingName:this.buildingName,floorName:this.floorName};this.events.triggerEvent("loadcomplete",a)},setReverseData:function(a){this.id=a.id,this.labelName=a.name,this.poiLon=a.poiLon,this.poiLat=a.poiLat,this.buildingName=a.buildingName,this.floorName=a.floorName},addReversePopup:function(a){if("0"!=a.id){var b=new Tmap.LonLat(Number(a.poiLon),Number(a.poiLat)),c="<h5>"+a.name+"</h5>";this.reverseLabelPopup=this.addSimpleLabel(b,c),this.map.addPopup(this.reverseLabelPopup)}else this.reverseLabelPopup&&(this.map.removePopup(this.reverseLabelPopup),this.reverseLabelPopup.destroy(),this.reverseLabelPopup=null)},addSimpleLabel:function(a,b){var c=new Tmap.Popup.FramedCloud("FramedLabel",a,null,b,null,!1);return c.imageSrc=Tmap.Util.getImageLocation("cloud-popup-relative2.png"),c.panMapIfOutOfView=!1,c.autoSize=!0,c.positionBlocks={tl:{offset:new Tmap.Pixel(44,17),padding:new Tmap.Bounds(8,40,8,9),blocks:[{size:new Tmap.Size("auto","auto"),anchor:new Tmap.Bounds(0,51,22,0),position:new Tmap.Pixel(0,0)},{size:new Tmap.Size(22,"auto"),anchor:new Tmap.Bounds(null,50,0,0),position:new Tmap.Pixel(-1238,0)},{size:new Tmap.Size("auto",19),anchor:new Tmap.Bounds(0,32,22,null),position:new Tmap.Pixel(0,-631)},{size:new Tmap.Size(22,18),anchor:new Tmap.Bounds(null,32,0,null),position:new Tmap.Pixel(-1238,-632)},{size:new Tmap.Size(81,35),anchor:new Tmap.Bounds(null,0,0,null),position:new Tmap.Pixel(0,-688)}]},tr:{offset:new Tmap.Pixel(-45,17),padding:new Tmap.Bounds(8,40,8,9),blocks:[{size:new Tmap.Size("auto","auto"),anchor:new Tmap.Bounds(0,51,22,0),position:new Tmap.Pixel(0,0)},{size:new Tmap.Size(22,"auto"),anchor:new Tmap.Bounds(null,50,0,0),position:new Tmap.Pixel(-1238,0)},{size:new Tmap.Size("auto",19),anchor:new Tmap.Bounds(0,32,22,null),position:new Tmap.Pixel(0,-631)},{size:new Tmap.Size(22,19),anchor:new Tmap.Bounds(null,32,0,null),position:new Tmap.Pixel(-1238,-631)},{size:new Tmap.Size(81,35),anchor:new Tmap.Bounds(0,0,null,null),position:new Tmap.Pixel(-215,-687)}]},bl:{offset:new Tmap.Pixel(45,-10),padding:new Tmap.Bounds(8,9,8,40),blocks:[{size:new Tmap.Size("auto","auto"),anchor:new Tmap.Bounds(0,21,22,32),position:new Tmap.Pixel(0,0)},{size:new Tmap.Size(22,"auto"),anchor:new Tmap.Bounds(null,21,0,32),position:new Tmap.Pixel(-1238,0)},{size:new Tmap.Size("auto",21),anchor:new Tmap.Bounds(0,0,22,null),position:new Tmap.Pixel(0,-629)},{size:new Tmap.Size(22,21),anchor:new Tmap.Bounds(null,0,0,null),position:new Tmap.Pixel(-1238,-629)},{size:new Tmap.Size(81,33),anchor:new Tmap.Bounds(null,null,0,0),position:new Tmap.Pixel(-101,-674)}]},br:{offset:new Tmap.Pixel(-44,-10),padding:new Tmap.Bounds(8,9,8,40),blocks:[{size:new Tmap.Size("auto","auto"),anchor:new Tmap.Bounds(0,21,22,32),position:new Tmap.Pixel(0,0)},{size:new Tmap.Size(22,"auto"),anchor:new Tmap.Bounds(null,21,0,32),position:new Tmap.Pixel(-1238,0)},{size:new Tmap.Size("auto",21),anchor:new Tmap.Bounds(0,0,22,null),position:new Tmap.Pixel(0,-629)},{size:new Tmap.Size(22,21),anchor:new Tmap.Bounds(null,0,0,null),position:new Tmap.Pixel(-1238,-629)},{size:new Tmap.Size(81,33),anchor:new Tmap.Bounds(0,null,null,0),position:new Tmap.Pixel(-311,-674)}]}},c},CLASS_NAME:"Tmap.Control.ReverseLabel"});