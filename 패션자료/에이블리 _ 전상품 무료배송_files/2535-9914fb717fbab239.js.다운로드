"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2535],{64955:function(e,t,o){function flatCartSections(e){return null==e?void 0:e.flatMap(e=>e.goodsSections.flat())}function flatCartGoods(e){return e.flatMap(e=>e.goodsSections.flatMap(e=>e.goods))}o.d(t,{I:function(){return flatCartGoods},c:function(){return flatCartSections}})},61370:function(e,t,o){o.d(t,{RF:function(){return sortOrderItemGroups},R_:function(){return getRefundEmoney},Wi:function(){return flatOrderItems},X:function(){return normalizeSimilarGoods},lR:function(){return getStatus},mR:function(){return getDeliveryWayText},z2:function(){return getStatusColor}});var n=o(80833),i=o(9759),r=o(72881),a=o(81679);let getStatus=e=>{let{processingStatus:t,processingSubStatus:o,exchangeStatus:n}=e;if(void 0!==t&&void 0!==o)return(0,a.SX)(t,o,n)},getStatusColor=e=>{switch(e){case n.Mt.ConfirmedPurchase:case n.Mt.ExchangeConfirmedPurchase:return"content_primary";case n.Mt.CancelComplete:case n.Mt.ReturnComplete:case n.Mt.PaymentAttempt:case n.Mt.CheckedFail:return"content_tertiary";default:return"content_pink_primary"}};function normalizeSimilarGoods(e){var t,o,n,i,s;return{CATEGORY_NAME:e.category.name,CATEGORY_SNO:e.category.sno,STANDARD_CATEGORY_NAME:e.standardCategory.name,STANDARD_CATEGORY_SNO:e.standardCategory.sno,DELIVERY_TYPE:e.deliveryType,DISCOUNT_RATE:(0,a.v5)({price:null!==(t=e.linkedOption.price)&&void 0!==t?t:0,consumer:null!==(o=e.linkedOption.originalPrice)&&void 0!==o?o:0}),GOODS_NAME:e.name,GOODS_SNO:e.sno,IS_AD:null!=e.ad?"1":"0",IS_NEW:e.isNew,LIKES_COUNT:e.market.goodsLikesCount,LIKES_COUNT_RANGE:(0,r.h)({rangeUnit:50,target:null!==(n=e.market.goodsLikesCount)&&void 0!==n?n:0}),MARKET_NAME:e.market.name,MARKET_SNO:e.market.sno,MARKET_TYPE:e.market.marketType.name,MARKET_TYPE_SNO:e.market.marketType.sno,REVIEW_COUNT:e.totalReviewCount,REVIEW_COUNT_RANGE:(0,r.h)({rangeUnit:50,target:e.totalReviewCount}),REVIEW_RATING:e.positiveReviewRate,SALES_PRICE:null!==(i=e.linkedOption.price)&&void 0!==i?i:0,SALES_PRICE_RANGE:(0,r.h)({rangeUnit:5e3,target:null!==(s=e.linkedOption.price)&&void 0!==s?s:0})}}function getDeliveryWayText(e){let{deliveryType:t,title:o,sectionsLength:i,sectionLength:r}=e,a=t===n.lF.Shak||o.includes("에이블리");return a||i<=1?"":r>1?"묶음배송":"개별배송"}function sortOrderItemGroups(e){return e.sort((e,t)=>e.deliveryType===n.lF.Shak&&t.deliveryType!==n.lF.Shak?-1:e.deliveryType!==n.lF.Shak&&t.deliveryType===n.lF.Shak?1:e.title.includes("에이블리")&&!t.title.includes("에이블리")?-1:!e.title.includes("에이블리")&&t.title.includes("에이블리")?1:0)}function flatOrderItems(e){return e.flatMap(e=>e.orderItemSections.flat())}function getRefundEmoney(e){var t;let o=e.expiringEmoney,n=e.emoney-(null!==(t=e.expiringEmoney)&&void 0!==t?t:0);return{refundEmoney:n,isExpiringEmoneyCalculating:null===o,expiringEmoneyAmount:o}}(0,a.zG)(e=>{let t=e.reduce((e,t)=>{let o=t.market.marketType===n.y5.Sellers,r=o?t.market.name:i.hF.name,a=e[r];return a||(a={marketName:r,items:[]},e[r]=a),a.items.push(t),e},{});return t},e=>Object.keys(e).sort((e,t)=>e===i.hF.name?-1:t===i.hF.name?1:0).map(t=>e[t]),e=>{let t=e.findIndex(e=>e.marketName===i.hF.name);if(t<0)return e;let o=e[t];o.items.sort((e,t)=>e.deliveryType===n.lF.Shak?-1:t.deliveryType===n.lF.Shak?1:0);let r=o.items.filter(e=>e.deliveryType===n.lF.Shak).length;if(r<1)return e;let a=o.items.splice(0,r);return o.items.length<1&&e.splice(t,1),e.unshift({marketName:"샥 출발",items:a,deliveryType:n.lF.Shak}),e})},2535:function(e,t,o){o.d(t,{jD:function(){return useCart},nc:function(){return useCartMeta}});var n=o(91987),i=o(64955),r=o(61370),a=o(1111),s=o(71217),l=o(55605);let getCart=async()=>await a.y.readOne(),useCart=e=>{var t;let o=(0,l.W)({serverFetched:!0,queryKey:s.E.cart(),queryFn:getCart,...e}),a=(0,n.useMemo)(()=>{var e,t;return(0,r.RF)(null!==(t=null===(e=o.data)||void 0===e?void 0:e.cartItems)&&void 0!==t?t:[])},[null===(t=o.data)||void 0===t?void 0:t.cartItems]),d=(0,n.useMemo)(()=>(0,i.I)(a),[a]),c=d.length;return{...o,sortedCartItems:a,flattedGoods:d,goodsCount:c}},getCartMeta=async()=>await a.y.cartsMeta(),useCartMeta=e=>(0,l.W)({enabled:!0,serverFetched:!0,queryKey:s.E.cartMeta(),queryFn:getCartMeta,...e})},1111:function(e,t,o){o.d(t,{y:function(){return i}});var n=o(56136);let i=new class{async deleteInBulk(e){await this.httpClient.request({method:"DELETE",url:"/api/v2/carts/delete_in_bulk",data:{snos:e}})}async readRecommendGoods(){let{data:e}=await this.httpClient.request({method:"GET",url:"/api/v2/carts/recommend_by_carts/"});return e}async changeEa(e,t){await this.httpClient.request({method:"POST",url:"/api/v2/carts/".concat(e,"/change_ea"),data:{count:t}})}async changeOption(e){await this.httpClient.request({method:"PUT",url:"/api/v2/carts/".concat(e.cartSno,"/"),data:{goods_option:{count:e.goodsOption.count,delivery_type:e.goodsOption.deliveryType,is_force:e.goodsOption.isForce,sno:e.goodsOption.sno,text_option:e.goodsOption.textOption}}})}async readPricings(e){let t=e.map(e=>{let{cartSno:t,channel:o}=e;return{sno:t,channel:o}}),{data:o}=await this.httpClient.request({method:"GET",url:"/api/v2/carts/pricings/",params:{carts:JSON.stringify(t)}});return{pricings:{totalCouponDc:o.pricings.total_coupon_dc,totalEmoneyDc:o.pricings.total_emoney_dc},coupon:o.coupon&&{sno:o.coupon.sno}}}async postCart(e){let{goodsOptions:t,goodsSno:o}=e;await this.httpClient.request({method:"POST",url:"/api/v2/carts/",data:{goods_options:t.map(e=>({count:e.count,delivery_type:e.deliveryType,is_force:e.isForce,sno:e.sno,...e.textOption&&{text_option:e.textOption}})),goods_sno:o}})}async readOne(){let{data:e}=await this.httpClient.request({method:"GET",url:"/api/v2/carts"});return{listId:e.list_id,listParams:e.list_params,cartsCount:e.carts_count,cartItems:e.cart_items.map(e=>({deliveryType:e.delivery_type,description:e.description,title:e.title,goodsSections:e.goods_sections.map(e=>({deliveryFee:e.delivery_fee,deliveryOrigin:e.delivery_origin,deliveryType:e.delivery_type,goodsCount:e.goods_count,ruralExtraDeliveryFee:e.rural_extra_delivery_fee,title:e.title,goods:e.goods.map(e=>{var t,o,n,i,r,a,s;return{sno:e.sno,name:e.name,image:e.image,isBuyable:e.is_buyable,isOpen:e.is_open,isNew:e.is_new,isRequiredInvoice:e.is_required_invoice,option:{sno:e.option.sno,optionNames:e.option.option_names,originalPrice:e.option.original_price,price:e.option.price,memberLevelPrice:e.option.member_level_price,point:e.option.point,isSoldout:e.option.is_soldout,isDelayed:e.option.is_delayed,textOption:e.option.text_option},cartSno:e.cart_sno,ea:e.ea,consumer:e.consumer,goodsDc:e.goods_dc,memberDc:e.member_dc,reserve:e.reserve,stock:e.stock,marketName:e.market_name,marketSno:e.market_sno,marketClientDisplayTypeName:e.market_client_display_type_name,category:{sno:null===(t=e.category)||void 0===t?void 0:t.sno,name:null===(o=e.category)||void 0===o?void 0:o.name,depth:null===(n=e.category)||void 0===n?void 0:n.depth,deeplink:null===(i=e.category)||void 0===i?void 0:i.deeplink,representativeImageUrl:null===(r=e.category)||void 0===r?void 0:r.representative_image_url},standardCategory:{sno:null==e?void 0:null===(a=e.standard_category)||void 0===a?void 0:a.sno,name:null==e?void 0:null===(s=e.standard_category)||void 0===s?void 0:s.name},availableOnlyNewMember:e.available_only_new_member,optionComponents:e.option_components.map(e=>({sno:e.sno,name:e.name})),textOption:e.text_option,deliveryType:e.delivery_type,standardDeliveryMessage:e.standard_delivery_message,deliveryLeadDays:e.delivery_lead_days,isDelayed:e.is_delayed,deliveryScore:e.delivery_score,isDeliveryLeadDaysMarketProvided:e.is_delivery_lead_days_market_provided,recommendGoodsButtonText:e.recommend_goods_button_text,recommendGoods:{listId:e.recommend_goods.list_id,itemList:e.recommend_goods.item_list,totalCount:e.recommend_goods.total_count,title:e.recommend_goods.title}}})}))})),goodsSections:e.goods_sections.map(e=>({deliveryOrigin:e.delivery_origin,goodsCount:e.goods_count,goods:e.goods.map(e=>{var t,o,n,i,r,a,s;return{sno:e.sno,name:e.name,image:e.image,isBuyable:e.is_buyable,isOpen:e.is_open,isNew:e.is_new,isRequiredInvoice:e.is_required_invoice,option:{sno:e.option.sno,optionNames:e.option.option_names,originalPrice:e.option.original_price,price:e.option.price,memberLevelPrice:e.option.member_level_price,point:e.option.point,isSoldout:e.option.is_soldout,isDelayed:e.option.is_delayed,textOption:e.option.text_option},cartSno:e.cart_sno,ea:e.ea,consumer:e.consumer,goodsDc:e.goods_dc,memberDc:e.member_dc,reserve:e.reserve,stock:e.stock,marketName:e.market_name,marketSno:e.market_sno,marketClientDisplayTypeName:e.market_client_display_type_name,category:{sno:null===(t=e.category)||void 0===t?void 0:t.sno,name:null===(o=e.category)||void 0===o?void 0:o.name,depth:null===(n=e.category)||void 0===n?void 0:n.depth,deeplink:null===(i=e.category)||void 0===i?void 0:i.deeplink,representativeImageUrl:null===(r=e.category)||void 0===r?void 0:r.representative_image_url},standardCategory:{sno:null==e?void 0:null===(a=e.standard_category)||void 0===a?void 0:a.sno,name:null==e?void 0:null===(s=e.standard_category)||void 0===s?void 0:s.name},availableOnlyNewMember:e.available_only_new_member,optionComponents:e.option_components.map(e=>({sno:e.sno,name:e.name})),textOption:e.text_option,deliveryType:e.delivery_type,standardDeliveryMessage:e.standard_delivery_message,deliveryLeadDays:e.delivery_lead_days,isDelayed:e.is_delayed,deliveryScore:e.delivery_score,isDeliveryLeadDaysMarketProvided:e.is_delivery_lead_days_market_provided,recommendGoodsButtonText:e.recommend_goods_button_text,recommendGoods:{listId:e.recommend_goods.list_id,itemList:e.recommend_goods.item_list,totalCount:e.recommend_goods.total_count,title:e.recommend_goods.title}}}),title:e.title,deliveryType:e.delivery_type,deliveryFee:e.delivery_fee,ruralExtraDeliveryFee:e.rural_extra_delivery_fee}))}}async cartsMeta(){let{data:e}=await this.httpClient.request({method:"GET",url:"/api/v2/carts/meta/"});return e}constructor(e){this.httpClient=e}}(n.KP)}}]);